(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"04ce":function(e,t,n){},"065d":function(e,t,n){"use strict";var r=n("04ce"),i=n.n(r);i.a},"1c4c":function(e,t,n){"use strict";var r=n("9b43"),i=n("5ca1"),o=n("4bf8"),s=n("1fa8"),a=n("33a4"),c=n("9def"),d=n("f1ae"),u=n("27ee");i(i.S+i.F*!n("5cc5")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,f,l=o(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,g=0,y=u(l);if(v&&(h=r(h,m>2?arguments[2]:void 0,2)),void 0==y||p==Array&&a(y))for(t=c(l.length),n=new p(t);t>g;g++)d(n,g,v?h(l[g],g):l[g]);else for(f=y.call(l),n=new p;!(i=f.next()).done;g++)d(n,g,v?s(f,h,[i.value,g],!0):i.value);return n.length=g,n}})},"1fb5":function(e,t,n){"use strict";t.byteLength=u,t.toByteArray=l,t.fromByteArray=h;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function d(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function u(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function f(e,t,n){return 3*(t+n)/4-n}function l(e){for(var t,n=d(e),r=n[0],s=n[1],a=new o(f(e,r,s)),c=0,u=s>0?r-4:r,l=0;l<u;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===s&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,a[c++]=255&t),1===s&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a}function p(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function m(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(p(r));return i.join("")}function h(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(m(e,a,a+s>c?c:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"5df3":function(e,t,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},"7f7f":function(e,t,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n("9e1e")&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},9152:function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,d=c>>1,u=-7,f=n?i-1:0,l=n?-1:1,p=e[t+f];for(f+=l,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+f],f+=l,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+f],f+=l,u-=8);if(0===o)o=1-d;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=d}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,d=8*o-i-1,u=(1<<d)-1,f=u>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,m=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+f>=1?l/c:l*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=m,a/=256,i-=8);for(s=s<<i|a,d+=i;d>0;e[n+p]=255&s,p+=m,s/=256,d-=8);e[n+p-m]|=128*h}},"978b":function(e,t,n){"use strict";(function(e){(function(){function t(){var e=this,t=new n;e.chunks={},e.users={},e.readAsArrayBuffer=function(n,r,i){var o={file:n,earlyCallback:function(e){r(s(e,{currentPosition:-1}))},extra:i||{userid:0}};n.extra&&Object.keys(n.extra).length&&Object.keys(n.extra).forEach(function(e){o.extra[e]=n.extra[e]}),t.readAsArrayBuffer(e,o)},e.getNextChunk=function(t,n,r){var i;"undefined"!==typeof t.currentPosition&&(i=t.currentPosition,t=t.uuid);var o=e.chunks[t];if(o){"undefined"!==typeof r?(e.users[r+""]||(e.users[r+""]={fileUUID:t,userid:r,currentPosition:-1}),"undefined"!==typeof i&&(e.users[r+""].currentPosition=i),e.users[r+""].currentPosition++,i=e.users[r+""].currentPosition):("undefined"!==typeof i&&(e.chunks[t].currentPosition=i),e.chunks[t].currentPosition++,i=e.chunks[t].currentPosition);var a=o[i];if(!a)return delete e.chunks[t],void e.convertToArrayBuffer({chunkMissing:!0,currentPosition:i,uuid:t},n);a=s(a),"undefined"!==typeof r&&(a.remoteUserId=r+""),a.start&&e.onBegin(a),a.end&&e.onEnd(a),e.onProgress(a),e.convertToArrayBuffer(a,function(e){a.currentPosition!=a.maxChunks?n(e,!1):n(e,!0)})}};var r=new i(e);function s(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var n in t=t||new e.constructor,e)t[n]="undefined"==typeof t[n]?s(e[n],null):t[n];return t}e.addChunk=function(t,n){t&&r.receive(t,function(t){e.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:t.currentPosition,uuid:t.uuid},n)})},e.chunkMissing=function(e){delete r.chunks[e.uuid],delete r.chunksWaiters[e.uuid]},e.onBegin=function(){},e.onEnd=function(){},e.onProgress=function(){},e.convertToObject=o.ConvertToObject,e.convertToArrayBuffer=o.ConvertToArrayBuffer,e.setMultipleUsers=function(){}}function n(){var e=this;function t(e,t){t=t||function(e){postMessage(e)};var n=e.file;n.uuid||(n.uuid=(100*Math.random()).toString().replace(/\./g,""));var r=e.chunkSize||15e3;e.extra&&e.extra.chunkSize&&(r=e.extra.chunkSize);var i,o=0,s=r,a=Math.floor(Math.min(1e8,s)/r),c=a*r,d=Math.ceil(n.size/r);n.maxChunks=d;var u=0,f=[];t({currentPosition:u,uuid:n.uuid,maxChunks:d,size:n.size,name:n.name,type:n.type,lastModifiedDate:(n.lastModifiedDate||new Date).toString(),start:!0});var l,p=new FileReader;function m(e,o,s){i=Math.ceil(o.byteLength/r);for(var a=0;a<i;a++){var c=a*r;f[u]=o.slice(c,Math.min(c+r,o.byteLength)),t({uuid:n.uuid,buffer:f[u],currentPosition:u,maxChunks:d,size:n.size,name:n.name,lastModifiedDate:(n.lastModifiedDate||new Date).toString(),type:n.type}),u++}u==d&&!0,s()}p.onloadend=function(e){e.target.readyState==FileReader.DONE&&m(n.name,e.target.result,function(){o++,(o+1)*c<n.size?(l=n.slice(o*c,(o+1)*c),p.readAsArrayBuffer(l)):o*c<n.size?(l=n.slice(o*c,n.size),p.readAsArrayBuffer(l)):(n.url=URL.createObjectURL(n),t({currentPosition:u,uuid:n.uuid,maxChunks:d,size:n.size,name:n.name,lastModifiedDate:(n.lastModifiedDate||new Date).toString(),url:URL.createObjectURL(n),type:n.type,end:!0}))})},u+=1,l=n.slice(o*c,(o+1)*c),p.readAsArrayBuffer(l)}e.readAsArrayBuffer=function(e,n){var r=n.earlyCallback;function i(t){e.chunks[t.uuid]||(e.chunks[t.uuid]={currentPosition:-1}),n.extra=n.extra||{userid:0},t.userid=n.userid||n.extra.userid||0,t.extra=n.extra,e.chunks[t.uuid][t.currentPosition]=t,t.end&&r&&(r(t.uuid),r=null),t.maxChunks>200&&200==t.currentPosition&&r&&(r(t.uuid),r=null)}delete n.earlyCallback,t(n,i)}}function r(){var e=this,t=function(){};function n(n,i,o){n=n||function(){};var s=document.createElement("input");s.type="file",i&&(s.multiple=!0),o&&(s.webkitdirectory=!0),s.accept=e.accept,s.onclick=function(){s.clickStarted=!0},document.body.onfocus=function(){setTimeout(function(){s.clickStarted&&(s.clickStarted=!1,s.value||t())},500)},s.onchange=function(){if(i){if(!s.files.length)return void console.error("No file selected.");var e=[];return Array.from(s.files).forEach(function(t){t.url=t.webkitRelativePath,e.push(t)}),void n(e)}s.files[0]?(n(s.files[0]),s.parentNode.removeChild(s)):console.error("No file selected.")},s.style.display="none",(document.body||document.documentElement).appendChild(s),r(s)}function r(e){if("function"!==typeof e.click)if("function"!==typeof e.change){if("undefined"!==typeof document.createEvent("Event")){var t=document.createEvent("Event");if("function"===typeof t.initEvent&&"function"===typeof e.dispatchEvent)return t.initEvent("click",!0,!0),void e.dispatchEvent(t)}t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}else e.change();else e.click()}e.selectSingleFile=function(e,r){r&&(t=r),n(e)},e.selectMultipleFiles=function(e,r){r&&(t=r),n(e,!0)},e.selectDirectory=function(e,r){r&&(t=r),n(e,!0,!0)},e.accept="*.*"}function i(e){var t=this;function n(r,i){if(r.uuid){if(r.start&&!t.chunks[r.uuid]&&(t.chunks[r.uuid]={},e.onBegin&&e.onBegin(r)),!r.end&&r.buffer&&(t.chunks[r.uuid][r.currentPosition]=r.buffer),r.end){var o=t.chunks[r.uuid],a=[];Object.keys(o).forEach(function(e,t){a.push(o[e])});var c=new Blob(a,{type:r.type});c=s(c,r),c.url=URL.createObjectURL(c),c.uuid=r.uuid,c.size||console.error("Something went wrong. Blob Size is 0."),e.onEnd&&e.onEnd(c),delete t.chunks[r.uuid],delete t.chunksWaiters[r.uuid]}r.buffer&&e.onProgress&&e.onProgress(r),r.end||(i(r),t.chunksWaiters[r.uuid]=function(){function e(){r.buffer&&t.chunks[r.uuid]&&(r.currentPosition==r.maxChunks||t.chunks[r.uuid][r.currentPosition]||(i(r),setTimeout(e,5e3)))}setTimeout(e,5e3)},t.chunksWaiters[r.uuid]())}else e.convertToObject(r,function(e){n(e)})}t.chunks={},t.chunksWaiters={},t.receive=n}var o={ConvertToArrayBuffer:function(e,t){C.pack(e,function(e){t(e.buffer)})},ConvertToObject:function(e,t){C.unpack(e,t)}};function s(e,t){if(e||(e={}),!t)return e;for(var n in t)try{e[n]=t[n]}catch(r){}return e}var a=!1,c=!1,d=!0,u=Uint8Array.BYTES_PER_ELEMENT,f=Uint16Array.BYTES_PER_ELEMENT,l=Uint32Array.BYTES_PER_ELEMENT,p={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17};if(a)var m=["NULL","UNDEFINED","STRING","NUMBER","BOOLEAN","ARRAY","OBJECT","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT16ARRAY","UINT32ARRAY","FLOAT32ARRAY","FLOAT64ARRAY","ARRAYBUFFER","BLOB","BUFFER"];var h=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],v=function(e,t,n){var r=[],i=c,o=40;r[0]=[];for(var s=0;s<o;s++)r[0][s]=s<10?"0"+s.toString(10):s.toString(10);for(s=0;s<n;s++){var a=e.getUint8(t+s,i),d=1+~~(s/o);"undefined"===typeof r[d]&&(r[d]=[]),r[d][s%o]=a<16?"0"+a.toString(16):a.toString(16)}for(console.log("%c"+r[0].join(" "),"font-weight: bold;"),s=1;s<r.length;s++)console.log(r[s].join(" "))},g=function(t){var n=void 0;if(void 0===t)n=p.UNDEFINED;else if(null===t)n=p.NULL;else{var r=t.constructor.name,i=t.constructor.toString().match(/\w+/g)[1];if(void 0!==r&&void 0!==p[r.toUpperCase()])n=p[r.toUpperCase()];else if(void 0!==i&&void 0!==p[i.toUpperCase()])n=p[i.toUpperCase()];else switch(typeof t){case"string":n=p.STRING;break;case"number":n=p.NUMBER;break;case"boolean":n=p.BOOLEAN;break;case"object":t instanceof Array?n=p.ARRAY:t instanceof Int8Array?n=p.INT8ARRAY:t instanceof Int16Array?n=p.INT16ARRAY:t instanceof Int32Array?n=p.INT32ARRAY:t instanceof Uint8Array?n=p.UINT8ARRAY:t instanceof Uint16Array?n=p.UINT16ARRAY:t instanceof Uint32Array?n=p.UINT32ARRAY:t instanceof Float32Array?n=p.FLOAT32ARRAY:t instanceof Float64Array?n=p.FLOAT64ARRAY:t instanceof ArrayBuffer?n=p.ARRAYBUFFER:t instanceof Blob?n=p.BLOB:t instanceof e?n=p.BUFFER:t instanceof Object&&(n=p.OBJECT);break;default:break}}return n},y=function(e){var t=0,n=0,r=0,i=c,o=new ArrayBuffer(e[0].byte_length+e[0].header_size),s=new DataView(o);for(n=0;n<e.length;n++){var d=t,g=e[n].header_size,y=e[n].type,w=e[n].length,S=e[n].value,b=e[n].byte_length,R=h[y],C=null===R?0:window[R+"Array"].BYTES_PER_ELEMENT;switch(y===p.BUFFER?s.setUint8(t,p.BLOB,i):s.setUint8(t,y,i),t+=u,a&&console.info("Packing",y,m[y]),y!==p.ARRAY&&y!==p.OBJECT||(s.setUint16(t,w,i),t+=f,a&&console.info("Content Length",w)),s.setUint32(t,b,i),t+=l,a&&(console.info("Header Size",g,"bytes"),console.info("Byte Length",b,"bytes")),y){case p.NULL:case p.UNDEFINED:break;case p.STRING:for(a&&console.info('Actual Content %c"'+S+'"',"font-weight:bold;"),r=0;r<w;r++,t+=C)s.setUint16(t,S.charCodeAt(r),i);break;case p.NUMBER:case p.BOOLEAN:a&&console.info("%c"+S.toString(),"font-weight:bold;"),s["set"+R](t,S,i),t+=C;break;case p.INT8ARRAY:case p.INT16ARRAY:case p.INT32ARRAY:case p.UINT8ARRAY:case p.UINT16ARRAY:case p.UINT32ARRAY:case p.FLOAT32ARRAY:case p.FLOAT64ARRAY:var A=new Uint8Array(s.buffer,t,b);A.set(new Uint8Array(S.buffer)),t+=b;break;case p.ARRAYBUFFER:case p.BUFFER:A=new Uint8Array(s.buffer,t,b);A.set(new Uint8Array(S)),t+=b;break;case p.BLOB:case p.ARRAY:case p.OBJECT:break;default:throw"TypeError: Unexpected type found."}a&&v(s,d,t-d)}return s},w=function(t,n){var r,i,o,s,d,g=0,y=c,S=n;r=t.getUint8(n,y),n+=u,a&&console.info("Unpacking",r,m[r]),r!==p.ARRAY&&r!==p.OBJECT||(i=t.getUint16(n,y),n+=f,a&&console.info("Content Length",i)),o=t.getUint32(n,y),n+=l,a&&console.info("Byte Length",o,"bytes");var b=h[r],R=null===b?0:window[b+"Array"].BYTES_PER_ELEMENT;switch(r){case p.NULL:case p.UNDEFINED:a&&v(t,S,n-S),s=null;break;case p.STRING:i=o/R;var C=[];for(g=0;g<i;g++){var A=t.getUint16(n,y);n+=R,C.push(String.fromCharCode(A))}s=C.join(""),a&&(console.info('Actual Content %c"'+s+'"',"font-weight:bold;"),v(t,S,n-S));break;case p.NUMBER:s=t.getFloat64(n,y),n+=R,a&&(console.info('Actual Content %c"'+s.toString()+'"',"font-weight:bold;"),v(t,S,n-S));break;case p.BOOLEAN:s=1===t.getUint8(n,y),n+=R,a&&(console.info('Actual Content %c"'+s.toString()+'"',"font-weight:bold;"),v(t,S,n-S));break;case p.INT8ARRAY:case p.INT16ARRAY:case p.INT32ARRAY:case p.UINT8ARRAY:case p.UINT16ARRAY:case p.UINT32ARRAY:case p.FLOAT32ARRAY:case p.FLOAT64ARRAY:case p.ARRAYBUFFER:d=t.buffer.slice(n,n+o),n+=o,s=r===p.ARRAYBUFFER?d:new window[b+"Array"](d),a&&v(t,S,n-S);break;case p.BLOB:if(a&&v(t,S,n-S),window.Blob){var T=w(t,n),E=w(t,T.cursor);n=E.cursor,s=new Blob([E.value],{type:T.value})}else d=t.buffer.slice(n,n+o),n+=o,s=new e(d);break;case p.ARRAY:for(a&&v(t,S,n-S),s=[],g=0;g<i;g++)d=w(t,n),n=d.cursor,s.push(d.value);break;case p.OBJECT:for(a&&v(t,S,n-S),s={},g=0;g<i;g++){var k=w(t,n),P=w(t,k.cursor);n=P.cursor,s[k.value]=P.value}break;default:throw"TypeError: Type not supported."}return{value:s,cursor:n}},S=function(e,t){for(var n=e.length,r=[],i=0,o=0,s=0;s<e.length;s++)(function(s){b(e[s],function(e){if(r[s]=e,o+=e[0].header_size+e[0].byte_length,++i===n){for(var a=[],c=0;c<r.length;c++)a=a.concat(r[c]);t(a,o)}})})(s)},b=function(e,t){var n,r=[],i=1,o=u+l,s=0,a=0,c=e;switch(n=g(e),i=void 0===h[n]||null===h[n]?0:window[h[n]+"Array"].BYTES_PER_ELEMENT,n){case p.UNDEFINED:case p.NULL:break;case p.NUMBER:case p.BOOLEAN:s=i;break;case p.STRING:a=e.length,s+=a*i;break;case p.INT8ARRAY:case p.INT16ARRAY:case p.INT32ARRAY:case p.UINT8ARRAY:case p.UINT16ARRAY:case p.UINT32ARRAY:case p.FLOAT32ARRAY:case p.FLOAT64ARRAY:a=e.length,s+=a*i;break;case p.ARRAY:return void S(e,function(r,i){t([{type:n,length:e.length,header_size:o+f,byte_length:i,value:null}].concat(r))});case p.OBJECT:var d=[];for(var m in e)e.hasOwnProperty(m)&&(d.push(m),d.push(e[m]),a++);return void S(d,function(e,r){t([{type:n,length:a,header_size:o+f,byte_length:r,value:null}].concat(e))});case p.ARRAYBUFFER:s+=e.byteLength;break;case p.BLOB:var v=e.type,y=new FileReader;return y.onload=function(e){S([v,e.target.result],function(e,r){t([{type:n,length:a,header_size:o,byte_length:r,value:null}].concat(e))})},y.onerror=function(e){throw"FileReader Error: "+e},void y.readAsArrayBuffer(e);case p.BUFFER:s+=e.length;break;default:throw'TypeError: Type "'+e.constructor.name+'" not supported.'}t([{type:n,length:a,header_size:o,byte_length:s,value:c}].concat(r))},R=function(e,t){var n=e instanceof DataView?e:new DataView(e),r=w(n,0);return r.value};a&&(window.Test={BIG_ENDIAN:c,LITTLE_ENDIAN:d,Types:p,pack:y,unpack:w,serialize:b,deserialize:R});var C={pack:function(e,t){try{a&&console.info("%cPacking Start","font-weight: bold; color: red;",e),b(e,function(e){a&&console.info("Serialized Object",e),t(y(e))})}catch(n){throw n}},unpack:function(e,t){try{a&&console.info("%cUnpacking Start","font-weight: bold; color: red;",e);var n=R(e);a&&console.info("Deserialized Object",n),t(n)}catch(r){throw r}}};window.FileConverter=o,window.FileSelector=r,window.FileBufferReader=t})()}).call(this,n("b639").Buffer)},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=d.prototype):(null===e&&(e=new d(t)),e.length=t),e}function d(e,t,n){if(!d.TYPED_ARRAY_SUPPORT&&!(this instanceof d))return new d(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?v(e,t,n,r):"string"===typeof t?m(e,t,n):g(e,t)}function f(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return f(t),t<=0?c(e,t):void 0!==n?"string"===typeof r?c(e,t).fill(n,r):c(e,t).fill(n):c(e,t)}function p(e,t){if(f(t),e=c(e,t<0?0:0|y(t)),!d.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function m(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!d.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|S(t,n);e=c(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function h(e,t){var n=t.length<0?0:0|y(t.length);e=c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function v(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),d.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=d.prototype):e=h(e,t),e}function g(e,t){if(d.isBuffer(t)){var n=0|y(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function w(e){return+e!=e&&(e=0),d.alloc(+e)}function S(e,t){if(d.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function R(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,i);if("number"===typeof t)return t&=255,d.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function d(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(d(e,o)===d(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,l=0;l<c;l++)if(d(e,o+l)!==d(t,l)){f=!1;break}if(f)return o}return-1}function T(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function E(e,t,n,r){return ee(K(t,e.length-n),e,n,r)}function k(e,t,n,r){return ee($(t),e,n,r)}function P(e,t,n,r){return k(e,t,n,r)}function O(e,t,n,r){return ee(Z(t),e,n,r)}function U(e,t,n,r){return ee(Q(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var o,s,a,c,d=e[i],u=null,f=d>239?4:d>223?3:d>191?2:1;if(i+f<=n)switch(f){case 1:d<128&&(u=d);break;case 2:o=e[i+1],128===(192&o)&&(c=(31&d)<<6|63&o,c>127&&(u=c));break;case 3:o=e[i+1],s=e[i+2],128===(192&o)&&128===(192&s)&&(c=(15&d)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&d)<<18|(63&o)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(u=c))}null===u?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return D(r)}t.Buffer=d,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:s(),t.kMaxLength=a(),d.poolSize=8192,d._augment=function(e){return e.__proto__=d.prototype,e},d.from=function(e,t,n){return u(null,e,t,n)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(e,t,n){return l(null,e,t,n)},d.allocUnsafe=function(e){return p(null,e)},d.allocUnsafeSlow=function(e){return p(null,e)},d.isBuffer=function(e){return!(null==e||!e._isBuffer)},d.compare=function(e,t){if(!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!d.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},d.byteLength=S,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)R(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)R(this,t,t+3),R(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)R(this,t,t+7),R(this,t+1,t+6),R(this,t+2,t+5),R(this,t+3,t+4);return this},d.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):b.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,i){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),f=0;f<a;++f)if(c[f]!==u[f]){o=c[f],s=u[f];break}return o<s?-1:s<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return T(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return P(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function D(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=X(e[o]);return i}function _(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Y(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function W(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function q(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,r,o){return o||q(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||q(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),d.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=d.prototype;else{var i=t-e;n=new d(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},d.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return r},d.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},d.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||F(e,t,this.length);var r=t,i=1,o=this[e+--r];while(r>0&&(i*=256))o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;Y(this,e,t,n,i,0)}var o=1,s=0;this[t]=255&e;while(++s<n&&(o*=256))this[t+s]=e/o&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;Y(this,e,t,n,i,0)}var o=n-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,255,0),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Y(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;this[t]=255&e;while(++o<n&&(s*=256))e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Y(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,127,-128),d.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),d.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},d.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},d.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=d.isBuffer(e)?e:K(new d(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function H(e){if(e=J(e).replace(z,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n,r,i,o=[],s=0;s<e.length;++s){if((t-=2)<0)break;n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(e){return r.toByteArray(H(e))}function ee(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function te(e){return e!==e}}).call(this,n("c8ba"))},cd68:function(e,t,n){"use strict";(function(n,r){var i,o,s=function(s,a){var c="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";function d(e,t){function n(e){return!e.audio&&!e.video&&!e.screen&&e.data}var r="";r+="?userid="+e.userid,r+="&sessionid="+e.sessionid,r+="&msgEvent="+e.socketMessageEvent,r+="&socketCustomEvent="+e.socketCustomEvent,r+="&autoCloseEntireSession="+!!e.autoCloseEntireSession,!0===e.session.broadcast&&(r+="&oneToMany=true"),r+="&maxParticipantsAllowed="+e.maxParticipantsAllowed,e.enableScalableBroadcast&&(r+="&enableScalableBroadcast=true",r+="&maxRelayLimitPerUser="+(e.maxRelayLimitPerUser||2)),r+="&extra="+JSON.stringify(e.extra||{}),e.socketCustomParameters&&(r+=e.socketCustomParameters);try{io.sockets={}}catch(c){}if(e.socketURL||(e.socketURL="/"),"/"!=e.socketURL.substr(e.socketURL.length-1,1))throw'"socketURL" MUST end with a slash.';e.enableLogs&&("/"==e.socketURL?console.info("socket.io url is: ",location.origin+"/"):console.info("socket.io url is: ",e.socketURL));try{e.socket=io(e.socketURL+r)}catch(c){e.socket=io.connect(e.socketURL+r,e.socketOptions)}var i=e.multiPeersHandler;function o(t,n){e.peersBackup[t]||(e.peersBackup[t]={userid:t,extra:{}}),e.peersBackup[t].extra=n}function s(t){if(t.remoteUserId==e.userid)if(e.peers[t.sender]&&e.peers[t.sender].extra!=t.message.extra&&(e.peers[t.sender].extra=t.extra,e.onExtraDataUpdated({userid:t.sender,extra:t.extra}),o(t.sender,t.extra)),t.message.streamSyncNeeded&&e.peers[t.sender]){var r=e.streamEvents[t.message.streamid];if(!r||!r.stream)return;var a=t.message.action;if("ended"===a||"inactive"===a||"stream-removed"===a)return e.peersBackup[r.userid]&&(r.extra=e.peersBackup[r.userid].extra),void e.onstreamended(r);var c="both"!=t.message.type?t.message.type:null;"function"==typeof r.stream[a]&&r.stream[a](c)}else if("dropPeerConnection"!==t.message){if(t.message.allParticipants)return-1===t.message.allParticipants.indexOf(t.sender)&&t.message.allParticipants.push(t.sender),void t.message.allParticipants.forEach(function(t){i[e.peers[t]?"renegotiatePeer":"createNewPeer"](t,{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:n(e.session)})});if(t.message.newParticipant){if(t.message.newParticipant==e.userid)return;if(e.peers[t.message.newParticipant])return;i.createNewPeer(t.message.newParticipant,t.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:n(e.session)})}else if(t.message.readyForOffer&&(e.attachStreams.length&&(e.waitingForLocalMedia=!1),e.waitingForLocalMedia))setTimeout(function(){s(t)},1);else if(t.message.newParticipationRequest&&t.sender!==e.userid){e.peers[t.sender]&&e.deletePeer(t.sender);var d={extra:t.extra||{},localPeerSdpConstraints:t.message.remotePeerSdpConstraints||{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:t.message.localPeerSdpConstraints||{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"!==typeof t.message.isOneWay?t.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:"undefined"!==typeof t.message.isDataOnly?t.message.isDataOnly:n(e.session),dontGetRemoteStream:"undefined"!==typeof t.message.isOneWay?t.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,dontAttachLocalStream:!!t.message.dontGetRemoteStream,connectionDescription:t,successCallback:function(){}};e.onNewParticipant(t.sender,d)}else{if(t.message.changedUUID&&e.peers[t.message.oldUUID]&&(e.peers[t.message.newUUID]=e.peers[t.message.oldUUID],delete e.peers[t.message.oldUUID]),t.message.userLeft)return i.onUserLeft(t.sender),void(t.message.autoCloseEntireSession&&e.leave());i.addNegotiatedMessage(t.message,t.sender)}}else e.deletePeer(t.sender)}e.socket.on("extra-data-updated",function(t,n){e.peers[t]&&(e.peers[t].extra=n,e.onExtraDataUpdated({userid:t,extra:n}),o(t,n))}),e.socket.on(e.socketMessageEvent,s);var a=!1;e.socket.resetProps=function(){a=!1},e.socket.on("connect",function(){a||(a=!0,e.enableLogs&&console.info("socket.io connection is opened."),setTimeout(function(){e.socket.emit("extra-data-updated",e.extra)},1e3),t&&t(e.socket))}),e.socket.on("disconnect",function(t){e.onSocketDisconnect(t)}),e.socket.on("error",function(t){e.onSocketError(t)}),e.socket.on("user-disconnected",function(t){t!==e.userid&&(e.onUserStatusChanged({userid:t,status:"offline",extra:e.peers[t]&&e.peers[t].extra||{}}),e.deletePeer(t))}),e.socket.on("user-connected",function(t){t!==e.userid&&e.onUserStatusChanged({userid:t,status:"online",extra:e.peers[t]&&e.peers[t].extra||{}})}),e.socket.on("closed-entire-session",function(t,n){e.leave(),e.onEntireSessionClosed({sessionid:t,userid:t,extra:n})}),e.socket.on("userid-already-taken",function(t,n){e.onUserIdAlreadyTaken(t,n)}),e.socket.on("logs",function(t){e.enableLogs&&console.debug("server-logs",t)}),e.socket.on("number-of-broadcast-viewers-updated",function(t){e.onNumberOfBroadcastViewersUpdated(t)}),e.socket.on("set-isInitiator-true",function(t){t==e.sessionid&&(e.isInitiator=!0)})}function u(e){var t=this,n=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];function r(){e.fbr=new FileBufferReader,e.fbr.onProgress=function(t){e.onFileProgress(t)},e.fbr.onBegin=function(t){e.onFileStart(t)},e.fbr.onEnd=function(t){e.onFileEnd(t)}}e.peers={getLength:function(){var e=0;for(var t in this)-1==n.indexOf(t)&&e++;return e},selectFirst:function(){var e;for(var t in this)-1==n.indexOf(t)&&(e=this[t]);return e},getAllParticipants:function(e){var t=[];for(var r in this)-1==n.indexOf(r)&&r!=e&&t.push(r);return t},forEach:function(t){this.getAllParticipants().forEach(function(n){t(e.peers[n])})},send:function(n,r){var i=this;if(!w(n.size)&&!w(n.type)){if(e.enableFileSharing)return void t.shareFile(n,r);"string"!==typeof n&&(n=JSON.stringify(n))}if("text"===n.type||n instanceof ArrayBuffer||n instanceof DataView){if("text"===n.type&&(n=JSON.stringify(n)),r){var o=e.peers[r];if(o)return o.channels.length?void o.channels.forEach(function(e){e.send(n)}):(e.peers[r].createDataChannel(),e.renegotiate(r),void setTimeout(function(){i.send(n,r)},3e3))}this.getAllParticipants().forEach(function(t){if(!i[t].channels.length)return e.peers[t].createDataChannel(),e.renegotiate(t),void setTimeout(function(){i[t].channels.forEach(function(e){e.send(n)})},3e3);i[t].channels.forEach(function(e){e.send(n)})})}else W.send({text:n,channel:this,connection:e,remoteUserId:r})}},this.uuid=e.userid,this.getLocalConfig=function(n,i,o){return o||(o={}),{streamsToShare:o.streamsToShare||{},rtcMultiConnection:e,connectionDescription:o.connectionDescription,userid:i,localPeerSdpConstraints:o.localPeerSdpConstraints,remotePeerSdpConstraints:o.remotePeerSdpConstraints,dontGetRemoteStream:!!o.dontGetRemoteStream,dontAttachLocalStream:!!o.dontAttachLocalStream,renegotiatingPeer:!!o.renegotiatingPeer,peerRef:o.peerRef,channels:o.channels||[],onLocalSdp:function(e){t.onNegotiationNeeded(e,i)},onLocalCandidate:function(n){n=I.processCandidates(e,n),n&&t.onNegotiationNeeded(n,i)},remoteSdp:n,onDataChannelMessage:function(n){if(!e.fbr&&e.enableFileSharing&&r(),"string"!=typeof n&&e.enableFileSharing){var o=this;n instanceof ArrayBuffer||n instanceof DataView?e.fbr.convertToObject(n,function(e){o.onDataChannelMessage(e)}):n.readyForNextChunk?e.fbr.getNextChunk(n,function(t,n){e.peers[i].channels.forEach(function(e){e.send(t)})},i):n.chunkMissing?e.fbr.chunkMissing(n):e.fbr.addChunk(n,function(t){e.peers[i].peer.channel.send(t)})}else t.onDataChannelMessage(n,i)},onDataChannelError:function(e){t.onDataChannelError(e,i)},onDataChannelOpened:function(e){t.onDataChannelOpened(e,i)},onDataChannelClosed:function(e){t.onDataChannelClosed(e,i)},onRemoteStream:function(n){e.peers[i]&&e.peers[i].streams.push(n),t.onGettingRemoteMedia(n,i)},onRemoteStreamRemoved:function(e){t.onRemovingRemoteMedia(e,i)},onPeerStateChanged:function(e){t.onPeerStateChanged(e),"new"===e.iceConnectionState&&t.onNegotiationStarted(i,e),"connected"===e.iceConnectionState&&t.onNegotiationCompleted(i,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(t.onUserLeft(i),t.disconnectWith(i))}}},this.createNewPeer=function(t,n){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(n=n||{},e.isInitiator&&e.session.audio&&"two-way"===e.session.audio&&!n.streamsToShare&&(n.isOneWay=!1,n.isDataOnly=!1,n.session=e.session),!n.isOneWay&&!n.isDataOnly)return n.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:n},t);n=e.setUserPreferences(n,t);var r=this.getLocalConfig(null,t,n);e.peers[t]=new L(r)}},this.createAnsweringPeer=function(t,n,r){r=e.setUserPreferences(r||{},n);var i=this.getLocalConfig(t,n,r);e.peers[n]=new L(i)},this.renegotiatePeer=function(t,n,r){if(e.peers[t]){n||(n={}),n.renegotiatingPeer=!0,n.peerRef=e.peers[t].peer,n.channels=e.peers[t].channels;var i=this.getLocalConfig(r,t,n);e.peers[t]=new L(i)}else e.enableLogs&&console.error("Peer ("+t+") does not exist. Renegotiation skipped.")},this.replaceTrack=function(t,n,r){if(!e.peers[n])throw"This peer ("+n+") does not exist.";var i=e.peers[n].peer;i.getSenders&&"function"===typeof i.getSenders&&i.getSenders().length?i.getSenders().forEach(function(i){r&&"video"===i.track.kind&&(e.peers[n].peer.lastVideoTrack=i.track,i.replaceTrack(t)),r||"audio"!==i.track.kind||(e.peers[n].peer.lastAudioTrack=i.track,i.replaceTrack(t))}):(console.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(n))},this.onNegotiationNeeded=function(e,t){},this.addNegotiatedMessage=function(n,r){if(n.type&&n.sdp)return"answer"==n.type&&e.peers[r]&&e.peers[r].addRemoteSdp(n),"offer"==n.type&&(n.renegotiatingPeer?this.renegotiatePeer(r,null,n):this.createAnsweringPeer(n,r)),void(e.enableLogs&&console.log("Remote peer's sdp:",n.sdp));if(n.candidate)return e.peers[r]&&e.peers[r].addRemoteCandidate(n),void(e.enableLogs&&console.log("Remote peer's candidate pairs:",n.candidate));if(n.enableMedia){e.session=n.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),n.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var i={};e.attachStreams.forEach(function(e){i[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),n.userPreferences.streamsToShare=i,t.onNegotiationNeeded({readyForOffer:!0,userPreferences:n.userPreferences},r)}n.readyForOffer&&e.onReadyForOffer(r,n.userPreferences)},this.onGettingRemoteMedia=function(e,t){},this.onRemovingRemoteMedia=function(e,t){},this.onGettingLocalMedia=function(e){},this.onLocalMediaError=function(t,n){e.onMediaError(t,n)},this.shareFile=function(t,n){r(),e.fbr.readAsArrayBuffer(t,function(t){var r=e.getAllParticipants();n&&(r=[n]),r.forEach(function(n){e.fbr.getNextChunk(t,function(t){e.peers[n].channels.forEach(function(e){e.send(t)})},n)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15e3:e.chunkSize||0})};var i=new Y(e);this.onDataChannelMessage=function(t,n){i.receive(JSON.parse(t),n,e.peers[n]?e.peers[n].extra:{})},this.onDataChannelClosed=function(t,n){t.userid=n,t.extra=e.peers[n]?e.peers[n].extra:{},e.onclose(t)},this.onDataChannelError=function(t,n){t.userid=n,event.extra=e.peers[n]?e.peers[n].extra:{},e.onerror(t)},this.onDataChannelOpened=function(t,n){e.peers[n].channels.length?e.peers[n].channels=[t]:(e.peers[n].channels.push(t),e.onopen({userid:n,extra:e.peers[n]?e.peers[n].extra:{},channel:t}))},this.onPeerStateChanged=function(t){e.onPeerStateChanged(t)},this.onNegotiationStarted=function(e,t){},this.onNegotiationCompleted=function(e,t){},this.getRemoteStreams=function(t){return t=t||e.peers.getAllParticipants()[0],e.peers[t]?e.peers[t].streams:[]}}function f(e,t,n){if("undefined"!==typeof CustomEvent){var r={arguments:n,__exposedProps__:n},i=new CustomEvent(t,r);e.dispatchEvent(i)}}function l(e,t){if(t.stream&&C(t.stream,"audio").length){if(!e||!t)throw"Both arguments are required.";if(e.onspeaking&&e.onsilence){if("undefined"===typeof hark)throw"hark.js not found.";hark(t.stream,{onspeaking:function(){e.onspeaking(t)},onsilence:function(){e.onsilence(t)},onvolumechange:function(n,r){e.onvolumechange&&e.onvolumechange(merge({volume:n,threshold:r},t))}})}}}function p(e,t){t.stream&&t.stream&&t.stream.addEventListener&&(t.stream.addEventListener("mute",function(n){n=e.streamEvents[t.streamid],n.session={audio:"audio"===n.muteType,video:"video"===n.muteType},e.onmute(n)},!1),t.stream.addEventListener("unmute",function(n){n=e.streamEvents[t.streamid],n.session={audio:"audio"===n.unmuteType,video:"video"===n.unmuteType},e.onunmute(n)},!1))}function m(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),t="",n=0,r=e.length;n<r;n++)t+=e[n].toString(36);return t}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}function h(e,t,n){if(n.autoCreateMediaElement){var r=!1;C(e,"video").length||e.isVideo||e.isScreen||(r=!0),"Firefox"===DetectRTC.browser.name&&(n.session.video||n.session.screen)&&(r=!1);var i=document.createElement(r?"audio":"video");if(i.srcObject=e,i.setAttribute("autoplay",!0),i.setAttribute("playsinline",!0),i.setAttribute("controls",!0),i.setAttribute("muted",!1),i.setAttribute("volume",1),"Firefox"===DetectRTC.browser.name){var o="ended";"oninactive"in i&&(o="inactive"),i.addEventListener(o,function(){if(currentUserMediaRequest.remove(e.idInstance),"local"===e.type){o="ended","oninactive"in e&&(o="inactive"),F.onSyncNeeded(e.streamid,o),n.attachStreams.forEach(function(t,r){e.streamid===t.streamid&&delete n.attachStreams[r]});var t=[];n.attachStreams.forEach(function(e){e&&t.push(e)}),n.attachStreams=t;var r=n.streamEvents[e.streamid];if(r)return void n.onstreamended(r);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var s=i.play();if("undefined"!==typeof s){var a=!1;setTimeout(function(){a||(a=!0,t(i))},1e3),s.then(function(){a||(a=!0,t(i))}).catch(function(e){a||(a=!0,t(i))})}else t(i)}else t({})}function v(e,t){window.removeEventListener(e,t),window.addEventListener(e,t,!1)}function g(e){var t=[];return e.forEach(function(e){e&&t.push(e)}),t}function y(e){return!e.audio&&!e.video&&!e.screen&&e.data}function w(e){return"undefined"===typeof e}function S(e){return"string"===typeof e}(function(e){e&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:c,getUserMedia:function(){}},n.console||(n.console={}),"undefined"===typeof n.console.debug&&(n.console.debug=n.console.info=n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},document.addEventListener=document.removeEventListener=e.addEventListener=e.removeEventListener=function(){},e.HTMLVideoElement=e.HTMLMediaElement=function(){}),"undefined"===typeof io&&(e.io=function(){return{on:function(e,t){t=t||function(){},"connect"===e&&t()},emit:function(e,t,n){n=n||function(){},"open-room"!==e&&"join-room"!==e||n(!0,t.sessionid,null)}}}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof URL&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)})("undefined"!==typeof n?n:null),function(){var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",a="object"===typeof r&&"object"===typeof r.versions&&r.versions.node&&!r.browser;if(a){var c=r.versions.node.toString().replace("v","");s="Nodejs/"+c+" (NodeOS) AppleWebKit/"+c+" (KHTML, like Gecko) Nodejs/"+c+" Nodejs/"+c}(function(e){"undefined"===typeof window&&("undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:s,getUserMedia:function(){}},e.window=n),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}))})("undefined"!==typeof n?n:window);var d=window.navigator;"undefined"!==typeof d?("undefined"!==typeof d.webkitGetUserMedia&&(d.getUserMedia=d.webkitGetUserMedia),"undefined"!==typeof d.mozGetUserMedia&&(d.getUserMedia=d.mozGetUserMedia)):d={getUserMedia:function(){},userAgent:s};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(d.userAgent||""),f=-1!==d.userAgent.indexOf("Edge")&&(!!d.msSaveOrOpenBlob||!!d.msSaveBlob),l=!!window.opera||d.userAgent.indexOf(" OPR/")>=0,p="undefined"!==typeof window.InstallTrigger,m=/^((?!chrome|android).)*safari/i.test(d.userAgent),h=!!window.chrome&&!l,v="undefined"!==typeof document&&!!document.documentMode&&!f;function g(){d.appVersion;var e,t,n,r=d.userAgent,i=d.appName,o=""+parseFloat(d.appVersion),s=parseInt(d.appVersion,10);if(m&&!h&&-1!==r.indexOf("CriOS")&&(m=!1,h=!0),l){i="Opera";try{o=d.userAgent.split("OPR/")[1].split(" ")[0],s=o.split(".")[0]}catch(a){o="0.0.0.0",s=0}}else v?(t=r.indexOf("rv:"),t>0?o=r.substring(t+3):(t=r.indexOf("MSIE"),o=r.substring(t+5)),i="IE"):h?(t=r.indexOf("Chrome"),i="Chrome",o=r.substring(t+7)):m?(t=r.indexOf("Safari"),i="Safari",o=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(o=r.substring(t+8)),-1!==d.userAgent.indexOf("Version/")&&(o=d.userAgent.split("Version/")[1].split(" ")[0])):p?(t=r.indexOf("Firefox"),i="Firefox",o=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(i=r.substring(e,t),o=r.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=d.appName));return f&&(i="Edge",o=d.userAgent.split("Edge/")[1]),-1!==(n=o.search(/[; \)]/))&&(o=o.substring(0,n)),s=parseInt(""+o,10),isNaN(s)&&(o=""+parseFloat(d.appVersion),s=parseInt(d.appVersion,10)),{fullVersion:o,version:s,name:i,isPrivateBrowsing:!1}}function y(e,t){var n=0,r=50,i=!1,o=window.setInterval(function(){e()&&(window.clearInterval(o),t(i)),n++>r&&(window.clearInterval(o),i=!0,t(i))},10)}function w(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&parseInt(n[1],10)>=10)}function S(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){t=!1},function(e){t=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{n=window.indexedDB.open("test"),n.onerror=function(){return!0}}catch(r){t=!0}"undefined"===typeof t&&y(function(){return"done"===n.readyState},function(e){e||(t=!n.result)})}else if(w(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(r){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(r){t=!0}"undefined"===typeof t&&(t=!1,window.localStorage.removeItem("test"))}}catch(r){t=!1}y(function(){return"undefined"!==typeof t},function(n){e(t)})}var b={Android:function(){return d.userAgent.match(/Android/i)},BlackBerry:function(){return d.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return d.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return d.userAgent.match(/Opera Mini/i)},Windows:function(){return d.userAgent.match(/IEMobile/i)},any:function(){return b.Android()||b.BlackBerry()||b.iOS()||b.Opera()||b.Windows()},getOsName:function(){var e="Unknown OS";return b.Android()&&(e="Android"),b.BlackBerry()&&(e="BlackBerry"),b.iOS()&&(e="iOS"),b.Opera()&&(e="Opera Mini"),b.Windows()&&(e="Windows"),e}};function R(){for(var e,t="-",n=d.appVersion,r=d.userAgent,i=t,o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],s=0;e=o[s];s++)if(e.r.test(r)){i=e.s;break}var a=t;switch(/Windows/.test(i)&&(/Windows (.*)/.test(i)&&(a=/Windows (.*)/.exec(i)[1]),i="Windows"),i){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(r)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(r)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(r)&&(a=/Android ([\.\_\d]+)/.exec(r)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(r)&&(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(n),a=a[1]+"."+a[2]+"."+(0|a[3]));break}return{osName:i,osVersion:a}}var C="Unknown OS",A="Unknown OS Version";function T(e){e=(e||d.userAgent).toLowerCase();var t=e.match(/android\s([0-9\.]*)/);return!!t&&t[1]}var E=R();E&&E.osName&&"-"!=E.osName?(C=E.osName,A=E.osVersion):b.any()&&(C=b.getOsName(),"Android"==C&&(A=T()));a="object"===typeof r&&"object"===typeof r.versions&&r.versions.node;"Unknown OS"===C&&a&&(C="Nodejs",A=r.versions.node.toString().replace("v",""));var k=!1,P=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!==typeof document&&"function"===typeof document.createElement&&(!k&&e in document.createElement("canvas")&&(k=!0),!P&&e in document.createElement("video")&&(P=!0))});var O=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,U=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,M=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;function L(e,t){if(z.isWebRTCSupported){var n=!0,r=!0;D(function(t){t?t.match(O)?(n=!1,e("Local: "+t,n,r)):t.match(M)?(r=!1,e("Public: "+t,n,r)):e("Public: "+t,n,r):e()},t)}}function D(e,t){if("undefined"!==typeof document&&"function"===typeof document.getElementById){var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var i=document.getElementById("iframe");if(!i)return;var o=i.contentWindow;r=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(r){var s=null;"Chrome"===z.browser&&z.browser.version<58&&(s={optional:[{RtpDataChannels:!0}]});var a={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},c=new r(a,s);if(t&&(c.addStream?c.addStream(t):c.addTrack&&t.getTracks()[0]&&c.addTrack(t.getTracks()[0],t)),c.onicecandidate=function(e){e.candidate&&e.candidate.candidate?d(e.candidate.candidate):d()},!t)try{c.createDataChannel("sctp",{})}catch(f){}z.isPromisesSupported?c.createOffer().then(function(e){c.setLocalDescription(e).then(u)}):c.createOffer(function(e){c.setLocalDescription(e,u,function(){})},function(){})}}function d(t){if(t){var r=U.exec(t);if(r){var i=r[1],o=t.match(O),s=!0;void 0===n[i]&&e(i,o,s),n[i]=!0}}else e()}function u(){var e=c.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&d(e)})}}var I=[],N=[],B=[],_=[];d.mediaDevices&&d.mediaDevices.enumerateDevices&&(d.enumerateDevices=function(e){var t=d.mediaDevices.enumerateDevices();t&&t.then?d.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var F=!1;"undefined"!==typeof x&&"getSources"in x?F=!0:d.mediaDevices&&d.mediaDevices.enumerateDevices&&(F=!0);var Y=!1,W=!1,V=!1,q=!1,G=!1;function j(e){if(F)if(!d.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(d.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!d.enumerateDevices&&d.enumerateDevices&&(d.enumerateDevices=d.enumerateDevices.bind(d)),d.enumerateDevices){I=[],N=[],B=[],_=[],Y=!1,W=!1,V=!1,q=!1,G=!1;var t={};d.enumerateDevices(function(n){n.forEach(function(e){var n={};for(var r in e)try{"function"!==typeof e[r]&&(n[r]=e[r])}catch(i){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||G||(G=!0),"audioinput"!==n.kind||q||(q=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(_.length+1):"audioinput"===n.kind?n.label="Microphone "+(N.length+1):"audiooutput"===n.kind?n.label="Speaker "+(B.length+1):n.label="Please invoke getUserMedia once.","undefined"!==typeof z&&z.browser.isChrome&&z.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(Y=!0,-1===N.indexOf(n)&&N.push(n)),"audiooutput"===n.kind&&(W=!0,-1===B.indexOf(n)&&B.push(n)),"videoinput"===n.kind&&(V=!0,-1===_.indexOf(n)&&_.push(n)),I.push(n),t[n.deviceId+n.label+n.kind]=n)}),"undefined"!==typeof z&&(z.MediaDevices=I,z.hasMicrophone=Y,z.hasSpeakers=W,z.hasWebcam=V,z.isWebsiteHasWebcamPermissions=G,z.isWebsiteHasMicrophonePermissions=q,z.audioInputDevices=N,z.audioOutputDevices=B,z.videoInputDevices=_),e&&e()})}else e&&e();else e&&e()}var z=window.DetectRTC||{};z.browser=g(),S(function(e){z.browser.isPrivateBrowsing=!!e}),z.browser["is"+z.browser.name]=!0,z.osName=C,z.osVersion=A;"object"===typeof r&&"object"===typeof r.versions&&r.versions["node-webkit"];var H=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){H||e in window&&(H=!0)}),z.isWebRTCSupported=H,z.isORTCSupported="undefined"!==typeof RTCIceGatherer;var J=!1;if(z.browser.isChrome&&z.browser.version>=35?J=!0:z.browser.isFirefox&&z.browser.version>=34?J=!0:z.browser.isEdge&&z.browser.version>=17?J=!0:"Android"===z.osName&&z.browser.isChrome&&(J=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var X="undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);X&&(z.browser.isChrome||z.browser.isEdge||z.browser.isOpera)?J=!1:z.browser.isFirefox&&(J=!1)}z.isScreenCapturingSupported=J;var K={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){K.isSupported||e in window&&(K.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(K.isCreateMediaStreamSourceSupported=!0))}),z.isAudioContextSupported=K.isSupported,z.isCreateMediaStreamSourceSupported=K.isCreateMediaStreamSourceSupported;var $=!1;z.browser.isChrome&&z.browser.version>31&&($=!0),z.isRtpDataChannelsSupported=$;var Q=!1;z.browser.isFirefox&&z.browser.version>28?Q=!0:z.browser.isChrome&&z.browser.version>25?Q=!0:z.browser.isOpera&&z.browser.version>=11&&(Q=!0),z.isSctpDataChannelsSupported=Q,z.isMobileDevice=u;var Z=!1;d.getUserMedia?Z=!0:d.mediaDevices&&d.mediaDevices.getUserMedia&&(Z=!0),z.browser.isChrome&&z.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(Z="Requires HTTPs"),"Nodejs"===z.osName&&(Z=!1),z.isGetUserMediaSupported=Z;var ee="";if(screen.width){var te=screen.width?screen.width:"",ne=screen.height?screen.height:"";ee+=te+" x "+ne}function re(e,t){function n(e,t){return 0==t?e:n(t,e%t)}var r=n(e,t);return e/r/(t/r)}z.displayResolution=ee,z.displayAspectRatio=re(screen.width,screen.height).toFixed(2),z.isCanvasSupportsStreamCapturing=k,z.isVideoSupportsStreamCapturing=P,"Chrome"==z.browser.name&&z.browser.version>=53&&(z.isCanvasSupportsStreamCapturing||(z.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),z.isVideoSupportsStreamCapturing||(z.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),z.DetectLocalIPAddress=L,z.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,z.isWebSocketsBlocked=!z.isWebSocketsSupported,"Nodejs"===z.osName&&(z.isWebSocketsSupported=!0,z.isWebSocketsBlocked=!1),z.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){z.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){z.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){z.isWebSocketsBlocked=!0,e()}}catch(r){z.isWebSocketsBlocked=!0,e()}},z.load=function(e){e=e||function(){},j(e)},z.MediaDevices="undefined"!==typeof I?I:[],z.hasMicrophone=Y,z.hasSpeakers=W,z.hasWebcam=V,z.isWebsiteHasWebcamPermissions=G,z.isWebsiteHasMicrophonePermissions=q,z.audioInputDevices=N,z.audioOutputDevices=B,z.videoInputDevices=_;var ie=!1;"undefined"!==typeof document&&"function"===typeof document.createElement&&"setSinkId"in document.createElement("video")&&(ie=!0),z.isSetSinkIdSupported=ie;var oe=!1;z.browser.isFirefox&&"undefined"!==typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(oe=!0):z.browser.isChrome&&"undefined"!==typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(oe=!0),z.isRTPSenderReplaceTracksSupported=oe;var se=!1;z.browser.isFirefox&&z.browser.version>38&&(se=!0),z.isRemoteStreamProcessingSupported=se;var ae=!1;"undefined"!==typeof x&&"applyConstraints"in x.prototype&&(ae=!0),z.isApplyConstraintsSupported=ae;var ce=!1;z.browser.isFirefox&&z.browser.version>=43&&(ce=!0),z.isMultiMonitorScreenCapturingSupported=ce,z.isPromisesSupported=!!("Promise"in window),z.version="1.3.9","undefined"===typeof z&&(window.DetectRTC={});var de=window.MediaStream;"undefined"===typeof de&&"undefined"!==typeof webkitMediaStream&&(de=webkitMediaStream),z.MediaStream="undefined"!==typeof de&&"function"===typeof de&&Object.keys(de.prototype),z.MediaStreamTrack="undefined"!==typeof x&&Object.keys(x.prototype);var ue=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;z.RTCPeerConnection="undefined"!==typeof ue&&Object.keys(ue.prototype),window.DetectRTC=z,e.exports=z,i=[],o=function(){return z}.apply(t,i),void 0===o||(e.exports=o)}(),"undefined"!==typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,t,n){e.attachEvent&&e.attachEvent("on"+t,n)}),window.attachEventListener=function(e,t,n,r){e.addEventListener(t,n,r)};var b=window.MediaStream;function R(e,t){return(!e.session.audio||"two-way"!==e.session.audio)&&("Firefox"===DetectRTC.browser.name&&!1!==t||!("Chrome"!==DetectRTC.browser.name||DetectRTC.browser.version<50)&&(!0===typeof t||!("undefined"!==typeof t||!e.session.audio||!e.session.screen||e.session.video)&&(t=!0,!0)))}function C(e,t){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(t||"audio")}):[]}function A(){var e=!1;try{if("undefined"===typeof RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=new k;try{t.addTransceiver("audio"),e=!0}catch(n){}t.close()}catch(n){e=!1}return e&&T()}function T(){var e=!1;try{var t=new k({sdpSemantics:"unified-plan"});try{var n=t.getConfiguration();e="unified-plan"==n.sdpSemantics||(n.sdpSemantics,!1)}catch(r){e=!1}}catch(r){e=!1}return e}function E(){if("undefined"!==typeof cordova&&"undefined"!==typeof cordova.plugins&&"undefined"!==typeof cordova.plugins.iosrtc){var e=cordova.plugins.iosrtc;window.webkitRTCPeerConnection=e.RTCPeerConnection,window.RTCSessionDescription=e.RTCSessionDescription,window.RTCIceCandidate=e.RTCIceCandidate,window.MediaStream=e.MediaStream,window.MediaStreamTrack=e.MediaStreamTrack,navigator.getUserMedia=navigator.webkitGetUserMedia=e.getUserMedia,e.debug.enable("iosrtc*"),"function"==typeof e.selectAudioOutput&&e.selectAudioOutput(window.iOSDefaultAudioOutputDevice||"speaker"),e.registerGlobals()}}"undefined"===typeof b&&"undefined"!==typeof webkitMediaStream&&(b=webkitMediaStream),"undefined"!==typeof b&&("stop"in b.prototype||(b.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})})),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker",document.addEventListener("deviceready",E,!1),E();var k,P={};function O(e){var t={OfferToReceiveAudio:!!e.OfferToReceiveAudio,OfferToReceiveVideo:!!e.OfferToReceiveVideo};return t}"undefined"!==typeof window.RTCPeerConnection?k=window.RTCPeerConnection:"undefined"!==typeof mozRTCPeerConnection?k=mozRTCPeerConnection:"undefined"!==typeof webkitRTCPeerConnection&&(k=webkitRTCPeerConnection);var U=window.RTCSessionDescription||window.mozRTCSessionDescription,M=window.RTCIceCandidate||window.mozRTCIceCandidate,x=window.MediaStreamTrack;function L(e){if("undefined"!==typeof window.RTCPeerConnection?k=window.RTCPeerConnection:"undefined"!==typeof mozRTCPeerConnection?k=mozRTCPeerConnection:"undefined"!==typeof webkitRTCPeerConnection&&(k=webkitRTCPeerConnection),U=window.RTCSessionDescription||window.mozRTCSessionDescription,M=window.RTCIceCandidate||window.mozRTCIceCandidate,x=window.MediaStreamTrack,!k)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";var t=e.rtcMultiConnection;this.extra=e.remoteSdp?e.remoteSdp.extra:t.extra,this.userid=e.userid,this.streams=[],this.channels=e.channels||[],this.connectionDescription=e.connectionDescription,this.addStream=function(e){t.addStream(e,n.userid)},this.removeStream=function(e){t.removeStream(e,n.userid)};var n=this;e.remoteSdp&&(this.connectionDescription=e.remoteSdp.connectionDescription);var r,i={};P.sdpConstraints=O({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var o=!!e.renegotiatingPeer;e.remoteSdp&&(o=!!e.remoteSdp.renegotiatingPeer);var s=[];if(t.attachStreams.forEach(function(e){e&&s.push(e)}),o)r=e.peerRef;else{var a="all";(t.candidates.turn||t.candidates.relay)&&(t.candidates.stun||t.candidates.reflexive||t.candidates.host||(a="relay"));try{var c={iceServers:t.iceServers,iceTransportPolicy:t.iceTransportPolicy||a};"undefined"!==typeof t.iceCandidatePoolSize&&(c.iceCandidatePoolSize=t.iceCandidatePoolSize),"undefined"!==typeof t.bundlePolicy&&(c.bundlePolicy=t.bundlePolicy),"undefined"!==typeof t.rtcpMuxPolicy&&(c.rtcpMuxPolicy=t.rtcpMuxPolicy),t.sdpSemantics&&(c.sdpSemantics=t.sdpSemantics||"unified-plan"),t.iceServers&&t.iceServers.length||(c=null,t.optionalArgument=null),r=new k(c,t.optionalArgument)}catch(h){try{c={iceServers:t.iceServers};r=new k(c)}catch(h){r=new k}}}!r.getRemoteStreams&&r.getReceivers&&(r.getRemoteStreams=function(){var e=new b;return r.getReceivers().forEach(function(t){e.addTrack(t.track)}),[e]}),!r.getLocalStreams&&r.getSenders&&(r.getLocalStreams=function(){var e=new b;return r.getSenders().forEach(function(t){e.addTrack(t.track)}),[e]}),r.onicecandidate=function(i){if(i.candidate)t.trickleIce&&e.onLocalCandidate({candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex});else if(!t.trickleIce){var o=r.localDescription;e.onLocalSdp({type:o.type,sdp:o.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:n.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:t?t.extra:{},streamsToShare:p})}},s.forEach(function(i){e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream||e.dontAttachLocalStream||(i=t.beforeAddingStream(i,n),i&&(r.getLocalStreams().forEach(function(e){i&&e.id==i.id&&(i=null)}),i&&i.getTracks&&i.getTracks().forEach(function(e){try{r.addTrack(e,i)}catch(h){}})))}),r.oniceconnectionstatechange=r.onsignalingstatechange=function(){var i=n.extra;t.peers[n.userid]&&(i=t.peers[n.userid].extra||i),r&&(e.onPeerStateChanged({iceConnectionState:r.iceConnectionState,iceGatheringState:r.iceGatheringState,signalingState:r.signalingState,extra:i,userid:n.userid}),r&&r.iceConnectionState&&-1!==r.iceConnectionState.search(/closed|failed/gi)&&n.streams instanceof Array&&n.streams.forEach(function(e){var n=t.streamEvents[e.id]||{streamid:e.id,stream:e,type:"remote"};t.onstreamended(n)}))};var d={OfferToReceiveAudio:!!s.length,OfferToReceiveVideo:!!s.length};e.localPeerSdpConstraints&&(d=e.localPeerSdpConstraints),P.sdpConstraints=O(d);var u={};r.ontrack=function(t){if(t&&"track"===t.type)if(t.stream=t.streams[t.streams.length-1],t.stream.id||(t.stream.id=t.track.id),u[t.stream.id]&&"Safari"!==DetectRTC.browser.name)t.track&&(t.track.onended=function(){r&&r.onremovestream(t)});else{u[t.stream.id]=t.stream.id;var n={};e.remoteSdp&&e.remoteSdp.streamsToShare?n=e.remoteSdp.streamsToShare:e.streamsToShare&&(n=e.streamsToShare);var o=n[t.stream.id];o?(t.stream.isAudio=o.isAudio,t.stream.isVideo=o.isVideo,t.stream.isScreen=o.isScreen):(t.stream.isVideo=!!C(t.stream,"video").length,t.stream.isAudio=!t.stream.isVideo,t.stream.isScreen=!1),t.stream.streamid=t.stream.id,i[t.stream.id]=t.stream,e.onRemoteStream(t.stream),t.stream.getTracks().forEach(function(e){e.onended=function(){r&&r.onremovestream(t)}}),t.stream.onremovetrack=function(){r&&r.onremovestream(t)}}},r.onremovestream=function(t){t.stream.streamid=t.stream.id,i[t.stream.id]&&delete i[t.stream.id],e.onRemoteStreamRemoved(t.stream)},"function"!==typeof r.removeStream&&(r.removeStream=function(e){e.getTracks().forEach(function(t){r.removeTrack(t,e)})}),this.addRemoteCandidate=function(e){r.addIceCandidate(new M(e))},this.addRemoteSdp=function(e,n){n=n||function(){},"Safari"!==DetectRTC.browser.name&&(e.sdp=t.processSdp(e.sdp)),r.setRemoteDescription(new U(e)).then(n,function(r){t.enableLogs&&console.error("setRemoteDescription failed","\n",r,"\n",e.sdp),n()}).catch(function(r){t.enableLogs&&console.error("setRemoteDescription failed","\n",r,"\n",e.sdp),n()})};var f=!0;function l(t){t.binaryType="arraybuffer",t.onmessage=function(t){e.onDataChannelMessage(t.data)},t.onopen=function(){e.onDataChannelOpened(t)},t.onerror=function(t){e.onDataChannelError(t)},t.onclose=function(t){e.onDataChannelClosed(t)},t.internalSend=t.send,t.send=function(e){"open"===t.readyState&&t.internalSend(e)},r.channel=t}e.remoteSdp&&(f=!1),this.createDataChannel=function(){var e=r.createDataChannel("sctp",{});l(e)},!0!==t.session.data||o||(f?this.createDataChannel():r.ondatachannel=function(e){var t=e.channel;l(t)}),this.enableDisableVideoEncoding=function(e){var t;if(r.getSenders().forEach(function(e){t||"video"!==e.track.kind||(t=e)}),t&&t.getParameters){var n=t.getParameters();n.encodings[1]&&(n.encodings[1].active=!!e),n.encodings[2]&&(n.encodings[2].active=!!e),t.setParameters(n)}},e.remoteSdp&&(e.remoteSdp.remotePeerSdpConstraints&&(d=e.remoteSdp.remotePeerSdpConstraints),P.sdpConstraints=O(d),this.addRemoteSdp(e.remoteSdp,function(){m("createAnswer")})),"two-way"!=t.session.audio&&"two-way"!=t.session.video&&"two-way"!=t.session.screen||(P.sdpConstraints=O({OfferToReceiveAudio:"two-way"==t.session.audio||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==t.session.video||"two-way"==t.session.screen||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var p={};function m(i){r[i](P.sdpConstraints).then(function(i){"Safari"!==DetectRTC.browser.name&&(i.sdp=t.processSdp(i.sdp)),r.setLocalDescription(i).then(function(){t.trickleIce&&(e.onLocalSdp({type:i.type,sdp:i.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:n.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:t?t.extra:{},streamsToShare:p}),t.onSettingLocalDescription(n))},function(e){t.enableLogs&&console.error("setLocalDescription error",e)})},function(e){t.enableLogs&&console.error("sdp-error",e)})}r.getLocalStreams().forEach(function(e){p[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),f&&m("createOffer"),r.nativeClose=r.close,r.close=function(){if(r){try{r.nativeClose!==r.close&&r.nativeClose()}catch(h){}r=null,n.peer=null}},this.peer=r}var D=function(){function e(e,r){var i=n(e);return i.videoCodecNumbers?"vp8"===r&&i.vp8LineNumber===i.videoCodecNumbers[0]?e:"vp9"===r&&i.vp9LineNumber===i.videoCodecNumbers[0]?e:"h264"===r&&i.h264LineNumber===i.videoCodecNumbers[0]?e:(e=t(e,r,i),e):e}function t(e,t,n,r){var i="";if("vp8"===t){if(!n.vp8LineNumber)return e;i=n.vp8LineNumber}if("vp9"===t){if(!n.vp9LineNumber)return e;i=n.vp9LineNumber}if("h264"===t){if(!n.h264LineNumber)return e;i=n.h264LineNumber}var o=n.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",s=[i];return r&&(s=[]),n.videoCodecNumbers.forEach(function(e){e!==i&&s.push(e)}),o+=s.join(" "),e=e.replace(n.videoCodecNumbersOriginal,o),e}function n(e){var t={};return e.split("\n").forEach(function(e){0===e.indexOf("m=video")&&(t.videoCodecNumbers=[],e.split("SAVPF")[1].split(" ").forEach(function(n){n=n.trim(),n&&n.length&&(t.videoCodecNumbers.push(n),t.videoCodecNumbersOriginal=e)})),-1===e.indexOf("VP8/90000")||t.vp8LineNumber||(t.vp8LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("VP9/90000")||t.vp9LineNumber||(t.vp9LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("H264/90000")||t.h264LineNumber||(t.h264LineNumber=e.replace("a=rtpmap:","").split(" ")[0])}),t}function r(e){var r=n(e);return e=t(e,"vp9",r,!0),e=t(e,"vp8",r,!0),e}function i(e){if(!e||"string"!==typeof e)throw"Invalid arguments.";return e=e.replace("a=rtcp-fb:126 nack\r\n",""),e=e.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),e=e.replace("a=rtcp-fb:97 nack\r\n",""),e=e.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n"),e}function o(e,t){if(t&&t.getSenders&&t.getSenders().length){if(!e||"string"!==typeof e)throw"Invalid arguments.";t.getSenders().forEach(function(t){for(var n=t.getParameters(),r=0;r<n.codecs.length;r++)if(n.codecs[r].mimeType==e){n.codecs.unshift(n.codecs.splice(r,1));break}t.setParameters(n)})}}function s(e){return e.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")}function a(e,t,n){return t?"undefined"!==typeof isFirefox&&isFirefox?e:(n&&(t.screen?t.screen<300&&console.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):console.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),t.screen&&n&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n")),(t.audio||t.video)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")),t.audio&&(e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+t.audio+"\r\n")),t.screen?e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n"):t.video&&(e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.video+"\r\n")),e):e}function c(e,t,n){return d(e,0,-1,t,n)}function d(e,t,n,r,i){for(var o=-1!==n?n:e.length,s=t;s<o;++s)if(0===e[s].indexOf(r)&&(!i||-1!==e[s].toLowerCase().indexOf(i.toLowerCase())))return s;return null}function u(e){var t=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}function f(e,t){t=t||{};var n,r=t.min,i=t.max,o=e.split("\r\n"),s=c(o,"a=rtpmap","VP8/90000");if(s&&(n=u(o[s])),!n)return e;var a,d=c(o,"a=rtpmap","rtx/90000");if(d&&(a=u(o[d])),!d)return e;var f=c(o,"a=fmtp:"+a.toString());if(null!==f){var l="\r\n";l+="a=fmtp:"+n+" x-google-min-bitrate="+(r||"228")+"; x-google-max-bitrate="+(i||"228"),o[f]=o[f].concat(l),e=o.join("\r\n")}return e}function l(e,t){t=t||{};var n,r=e.split("\r\n"),i=c(r,"a=rtpmap","opus/48000");if(i&&(n=u(r[i])),!n)return e;var o=c(r,"a=fmtp:"+n.toString());if(null===o)return e;var s="";return s+="; stereo="+("undefined"!=typeof t.stereo?t.stereo:"1"),s+="; sprop-stereo="+("undefined"!=typeof t["sprop-stereo"]?t["sprop-stereo"]:"1"),"undefined"!=typeof t.maxaveragebitrate&&(s+="; maxaveragebitrate="+(t.maxaveragebitrate||1048576)),"undefined"!=typeof t.maxplaybackrate&&(s+="; maxplaybackrate="+(t.maxplaybackrate||1048576)),"undefined"!=typeof t.cbr&&(s+="; cbr="+("undefined"!=typeof t.cbr?t.cbr:"1")),"undefined"!=typeof t.useinbandfec&&(s+="; useinbandfec="+t.useinbandfec),"undefined"!=typeof t.usedtx&&(s+="; usedtx="+t.usedtx),"undefined"!=typeof t.maxptime&&(s+="\r\na=maxptime:"+t.maxptime),r[o]=r[o].concat(s),e=r.join("\r\n"),e}function p(e){for(var t=e.split("\r\n"),n=null,r=0;r<t.length;r++)if(-1!==t[r].search("opus/48000")){var i=extractSdp(t[r],/:(\d+) opus\/48000/i);break}for(r=0;r<t.length;r++)if(-1!==t[r].search("a=fmtp")){var o=extractSdp(t[r],/a=fmtp:(\d+)/);if(o===i){n=r;break}}return null===n?e:(t[n]=t[n].concat("; stereo=1; sprop-stereo=1"),e=t.join("\r\n"),e)}return{removeVPX:r,disableNACK:i,prioritize:o,removeNonG722:s,setApplicationSpecificBandwidth:function(e,t,n){return a(e,t,n)},setVideoBitrates:function(e,t){return f(e,t)},setOpusAttributes:function(e,t){return l(e,t)},preferVP9:function(t){return e(t,"vp9")},preferCodec:e,forceStereoAudio:p}}();window.BandwidthHandler=D;var I=function(){function e(e,t){var n=t.candidate,r=e.candidates,i=r.stun,o=r.turn;if(w(r.reflexive)||(i=r.reflexive),w(r.relay)||(o=r.relay),(r.host||!n.match(/typ host/g))&&(o||!n.match(/typ relay/g))&&(i||!n.match(/typ srflx/g))){var s=e.iceProtocols;if((s.udp||!n.match(/ udp /g))&&(s.tcp||!n.match(/ tcp /g)))return e.enableLogs&&console.debug("Your candidate pairs:",n),{candidate:n,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex}}}return{processCandidates:e}}(),N=function(){function e(e){var t=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}];return t}return{getIceServers:e}}();function B(e,t){e.mandatory&&e.mandatory.chromeMediaSource?t.isScreen=!0:e.mozMediaSource||e.mediaSource?t.isScreen=!0:e.video?t.isVideo=!0:e.audio&&(t.isAudio=!0)}function _(e){if(!0!==currentUserMediaRequest.mutex){currentUserMediaRequest.mutex=!0;var t=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[t])s(currentUserMediaRequest.streams[t].stream,!0);else{var n=!!/BB10|BlackBerry/i.test(navigator.userAgent||"");if(n||"undefined"===typeof navigator.mediaDevices||"function"!==typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(e.localMediaConstraints,function(e){e.streamid=e.streamid||e.id||m(),e.idInstance=t,s(e)},function(t){e.onLocalMediaError(t,e.localMediaConstraints)});if("undefined"===typeof navigator.mediaDevices){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var r,i,o=function(){};navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),r=stream},function(e){o(e),i=e}),{then:function(e){if(!r)return e,{then:function(e){i?e(i):o=e}};e(r)}}}}}if(!0===e.localMediaConstraints.isScreen){if(navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||m(),e.idInstance=t,s(e)}).catch(function(t){e.onLocalMediaError(t,e.localMediaConstraints)});else{if(!navigator.getDisplayMedia)throw new Error("getDisplayMedia API is not availabe in this browser.");navigator.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||m(),e.idInstance=t,s(e)}).catch(function(t){e.onLocalMediaError(t,e.localMediaConstraints)})}return}navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||m(),e.idInstance=t,s(e)}).catch(function(t){e.onLocalMediaError(t,e.localMediaConstraints)})}}else currentUserMediaRequest.queueRequests.push(e);function s(n,r){B(e.localMediaConstraints,n);var i="ended";"oninactive"in n&&(i="inactive"),n.addEventListener(i,function(){delete currentUserMediaRequest.streams[t],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=g(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[t]={stream:n},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&_(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(n,r)}}window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var t=this.streams[e];if(t){t=t.stream;var n=t.currentUserMediaRequestOptions;this.queueRequests.indexOf(n)&&(delete this.queueRequests[this.queueRequests.indexOf(n)],this.queueRequests=g(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e]}}};var F=function(){function e(e){if(e)return"string"===typeof e||"undefined"===typeof e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0}function t(t,r,i){if(t&&t.addEventListener){if("undefined"==typeof r||1==r){var o="ended";"oninactive"in t&&(o="inactive"),t.addEventListener(o,function(){F.onSyncNeeded(this.streamid,o)},!1)}t.mute=function(n,o){n=e(n),"undefined"!==typeof o&&(r=o),"undefined"!=typeof n&&"audio"!=n||C(t,"audio").forEach(function(e){e.enabled=!1,i.streamEvents[t.streamid].isAudioMuted=!0}),"undefined"!=typeof n&&"video"!=n||C(t,"video").forEach(function(e){e.enabled=!1}),"undefined"!=typeof r&&1!=r||F.onSyncNeeded(t.streamid,"mute",n),i.streamEvents[t.streamid].muteType=n||"both",f(t,"mute",n)},t.unmute=function(n,o){n=e(n),"undefined"!==typeof o&&(r=o),s(),"undefined"!=typeof n&&"audio"!=n||C(t,"audio").forEach(function(e){e.enabled=!0,i.streamEvents[t.streamid].isAudioMuted=!1}),"undefined"!=typeof n&&"video"!=n||(C(t,"video").forEach(function(e){e.enabled=!0}),"undefined"!==typeof n&&"video"==n&&i.streamEvents[t.streamid].isAudioMuted&&function e(n){n||(n=0),n++,n<100&&i.streamEvents[t.streamid].isAudioMuted&&(t.mute("audio"),setTimeout(function(){e(n)},50))}()),"undefined"!=typeof r&&1!=r||F.onSyncNeeded(t.streamid,"unmute",n),i.streamEvents[t.streamid].unmuteType=n||"both",f(t,"unmute",n)}}function s(){if(i.streamEvents[t.streamid].mediaElement){var e=i.streamEvents[t.streamid].mediaElement;e.volume=0,n(200,5,function(){try{e.volume+=.2}catch(t){e.volume=1}})}}}function n(e,t,r,i){i=(i||0)+1,i>=t||setTimeout(function(){r(),n(e,t,r,i)},e)}return{setHandlers:t,onSyncNeeded:function(e,t,n){}}}();function Y(e){var t={};function n(n,r,i){var o=n.uuid;if(t[o]||(t[o]=[]),t[o].push(n.message),n.last){var s=t[o].join("");n.isobject&&(s=JSON.parse(s));var a=(new Date).getTime(),c=a-n.sendingTime,d={data:s,userid:r,extra:i,latency:c};e.autoTranslateText?(d.original=d.data,e.Translator.TranslateText(d.data,function(t){d.data=t,e.onmessage(d)})):e.onmessage(d),delete t[o]}}return{receive:n}}var W={send:function(e){var t=e.connection,n=e.channel,r=e.remoteUserId,i=e.text,o=t.chunkSize||1e3,s="",a=!1;S(i)||(a=!0,i=JSON.stringify(i));var c=m(),d=(new Date).getTime();function u(e,i){var f={type:"text",uuid:c,sendingTime:d};e&&(i=e,f.packets=parseInt(i.length/o)),i.length>o?f.message=i.slice(0,o):(f.message=i,f.last=!0,f.isobject=a),n.send(f,r),s=i.slice(f.message.length),s.length&&setTimeout(function(){u(null,s)},t.chunkInterval||100)}u(i)}},V=function(){function e(e){var t={};function n(e,t){if(-1!==e.position){var n=+e.position.toFixed(2).split(".")[1]||100;t.innerHTML=n+"%"}}e.onFileStart=function(n){var r=document.createElement("div");if(r.title=n.name,r.innerHTML="<label>0%</label> <progress></progress>",n.remoteUserId&&(r.innerHTML+=" (Sharing with:"+n.remoteUserId+")"),e.filesContainer||(e.filesContainer=document.body||document.documentElement),e.filesContainer.insertBefore(r,e.filesContainer.firstChild),!n.remoteUserId)return t[n.uuid]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},void(t[n.uuid].progress.max=n.maxChunks);t[n.uuid]||(t[n.uuid]={}),t[n.uuid][n.remoteUserId]={div:r,progress:r.querySelector("progress"),label:r.querySelector("label")},t[n.uuid][n.remoteUserId].progress.max=n.maxChunks},e.onFileProgress=function(e){var r=t[e.uuid];r&&(e.remoteUserId&&(r=t[e.uuid][e.remoteUserId],!r)||(r.progress.value=e.currentPosition||e.maxChunks||r.progress.max,n(r.progress,r.label)))},e.onFileEnd=function(e){var n=t[e.uuid];if(n){if(!e.remoteUserId||(n=t[e.uuid][e.remoteUserId],n)){var r=n.div;-1!=e.type.indexOf("image")?r.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><img src="'+e.url+'" title="'+e.name+'" style="max-width: 80%;">':r.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><iframe src="'+e.url+'" title="'+e.name+'" style="width: 80%;border: 0;height: inherit;margin-top:1em;"></iframe>'}}else console.error("No such progress-helper element exist.",e)}}return{handle:e}}(),q=function(){function e(e){e.autoTranslateText=!1,e.language="en",e.googKey="AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE",e.Translator={TranslateText:function(t,n){var r=document.createElement("script");r.type="text/javascript";var i=encodeURIComponent(t),o="method"+e.token();window[o]=function(e){e.data&&e.data.translations[0]&&n?n(e.data.translations[0].translatedText):e.error&&"Daily Limit Exceeded"===e.error.message?console.error('Text translation failed. Error message: "Daily Limit Exceeded."'):e.error?console.error(e.error.message):console.error(e)};var s="https://www.googleapis.com/language/translate/v2?key="+e.googKey+"&target="+(e.language||"en-US")+"&callback=window."+o+"&q="+i;r.src=s,document.getElementsByTagName("head")[0].appendChild(r)},getListOfLanguages:function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE){var e=JSON.parse(n.responseText);if(e&&e.data&&e.data.languages)return void t(e.data.languages);if(e.error&&"Daily Limit Exceeded"===e.error.message)return void console.error('Text translation failed. Error message: "Daily Limit Exceeded."');if(e.error)return void console.error(e.error.message);console.error(e)}};var r="https://www.googleapis.com/language/translate/v2/languages?key="+e.googKey+"&target=en";n.open("GET",r,!0),n.send(null)}}}return{handle:e}}();(function(e){a=a||{useDefaultDevices:!0},e.channel=e.sessionid=(s||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"";var t=new u(e),n={};function r(t){e.deletePeer(t)}function i(t){if(e.socketAutoReConnect=!0,e.socket)t&&t(e.socket);else{if("undefined"===typeof d)if("undefined"!==typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else{if("undefined"===typeof PubNubConnection)throw"SocketConnection.js seems missed.";window.SocketConnection=PubNubConnection}new d(e,function(n){t&&t(e.socket)})}}function o(n,r){e.socket.emit("join-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:f(),extra:e.extra,password:"undefined"!==typeof e.password&&"object"!==typeof e.password?e.password:""},function(i,o){if(!0===i){if(e.enableLogs&&console.log("isRoomJoined: ",i," roomid: ",e.sessionid),e.peers[e.sessionid])return;t.onNegotiationNeeded(n)}!1===i&&e.enableLogs&&console.warn("isRoomJoined: ",o," roomid: ",e.sessionid),r(i,e.sessionid,o)})}function c(t){e.enableLogs&&console.log("Sending open-room signal to socket.io"),e.waitingForLocalMedia=!1,e.socket.emit("open-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:f(),extra:e.extra,identifier:e.publicRoomIdentifier,password:"undefined"!==typeof e.password&&"object"!==typeof e.password?e.password:""},function(n,r){!0===n&&(e.enableLogs&&console.log("isRoomOpened: ",n," roomid: ",e.sessionid),t(n,e.sessionid)),!1===n&&(e.enableLogs&&console.warn("isRoomOpened: ",r," roomid: ",e.sessionid),t(n,e.sessionid,r))})}function f(){try{return e.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(t){return[]}}function g(n,r){if(e.dontCaptureUserMedia||n.isDataOnly)r();else{var i={};n.localPeerSdpConstraints.OfferToReceiveAudio&&(i.audio=e.mediaConstraints.audio),n.localPeerSdpConstraints.OfferToReceiveVideo&&(i.video=e.mediaConstraints.video);var o=n.session||e.session;o.oneway&&"two-way"!==o.audio&&"two-way"!==o.video&&"two-way"!==o.screen?r():(o.oneway&&o.audio&&"two-way"===o.audio&&(o={audio:!0}),(o.audio||o.video||o.screen)&&(o.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:R(e)}).then(function(n){n.isScreen=!0,t.onGettingLocalMedia(n),!o.audio&&!o.video||R(e)?r(n):e.invokeGetUserMedia(null,r)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:R(e),video:!0,isScreen:!0},!o.audio&&!o.video||R(e)?r:e.invokeGetUserMedia(null,r)):(o.audio||o.video)&&e.invokeGetUserMedia(null,r,o)))}}function w(t,n){t?(n.audio&&C(t,"audio").forEach(function(e){e.applyConstraints(n.audio)}),n.video&&C(t,"video").forEach(function(e){e.applyConstraints(n.video)})):e.enableLogs&&console.error("No stream to applyConstraints.")}function S(n,r,i){r?t.replaceTrack(n,r,i):e.peers.getAllParticipants().forEach(function(e){t.replaceTrack(n,e,i)})}t.onGettingLocalMedia=function(t,r){if(r=r||function(){},n[t.streamid])r();else{n[t.streamid]=!0;try{t.type="local"}catch(i){}e.setStreamEndHandler(t),h(t,function(n){n.id=t.streamid,n.muted=!0,n.volume=0,-1===e.attachStreams.indexOf(t)&&e.attachStreams.push(t),"undefined"!==typeof F&&F.setHandlers(t,!0,e),e.streamEvents[t.streamid]={stream:t,type:"local",mediaElement:n,userid:e.userid,extra:e.extra,streamid:t.streamid,isAudioMuted:!0};try{l(e,e.streamEvents[t.streamid]),p(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])}catch(i){}r()},e)}},t.onGettingRemoteMedia=function(t,n){try{t.type="remote"}catch(r){}e.setStreamEndHandler(t,"remote-stream"),h(t,function(r){r.id=t.streamid,"undefined"!==typeof F&&F.setHandlers(t,!1,e),e.streamEvents[t.streamid]={stream:t,type:"remote",userid:n,extra:e.peers[n]?e.peers[n].extra:{},mediaElement:r,streamid:t.streamid},p(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])},e)},t.onRemovingRemoteMedia=function(t,n){var r=e.streamEvents[t.streamid];r||(r={stream:t,type:"remote",userid:n,extra:e.peers[n]?e.peers[n].extra:{},streamid:t.streamid,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),e.peersBackup[r.userid]&&(r.extra=e.peersBackup[r.userid].extra),e.onstreamended(r),delete e.streamEvents[t.streamid]},t.onNegotiationNeeded=function(t,n,r){r=r||function(){},n=n||t.remoteUserId,t=t||"";var o={remoteUserId:n,message:t,sender:e.userid};t.remoteUserId&&t.message&&t.sender&&(o=t),i(function(){e.socket.emit(e.socketMessageEvent,o,r)})},t.onUserLeft=r,t.disconnectWith=function(t,n){e.socket&&e.socket.emit("disconnect-with",t,n||function(){}),e.deletePeer(t)},e.socketOptions={transport:"polling"},e.openOrJoin=function(t,n){n=n||function(){},e.checkPresence(t,function(t,r){if(t){e.sessionid=r;var i=!1,s=!1,a=!!e.session.oneway,d=y(e.session);s={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},i={OfferToReceiveAudio:a?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo};var u={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:a,isDataOnly:d,localPeerSdpConstraints:i,remotePeerSdpConstraints:s},sender:e.userid};g(u.message,function(){o(u,n)})}else e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=r||e.sessionid,y(e.session)?c(n):e.captureUserMedia(function(){c(n)})})},e.waitingForLocalMedia=!1,e.open=function(t,n){n=n||function(){},e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=t||e.sessionid,i(function(){y(e.session)?c(n):e.captureUserMedia(function(){c(n)})})},e.peersBackup={},e.deletePeer=function(t){if(t&&e.peers[t]){var n={userid:t,extra:e.peers[t]?e.peers[t].extra:{}};if(e.peersBackup[n.userid]&&(n.extra=e.peersBackup[n.userid].extra),e.onleave(n),e.peers[t]){e.peers[t].streams.forEach(function(e){e.stop()});var r=e.peers[t].peer;if(r&&"closed"!==r.iceConnectionState)try{r.close()}catch(i){}e.peers[t]&&(e.peers[t].peer=null,delete e.peers[t])}}},e.rejoin=function(t){if(!e.isInitiator&&t&&Object.keys(t).length){var n={};e.peers[t.remoteUserId]&&(n=e.peers[t.remoteUserId].extra,e.deletePeer(t.remoteUserId)),t&&t.remoteUserId&&(e.join(t.remoteUserId),e.onReConnecting({userid:t.remoteUserId,extra:n}))}},e.join=function(t,n){e.sessionid=!!t&&(t.sessionid||t.remoteUserId||t)||e.sessionid,e.sessionid+="";var r=!1,s=!1,a=!1,c=!1;if(t&&t.session||!t||"string"===typeof t){var d=t&&t.session||e.session;a=!!d.oneway,c=y(d),s={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:a?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo}}n=n||{};var u=function(){};"function"===typeof n&&(u=n,n={}),"undefined"!==typeof n.localPeerSdpConstraints&&(r=n.localPeerSdpConstraints),"undefined"!==typeof n.remotePeerSdpConstraints&&(s=n.remotePeerSdpConstraints),"undefined"!==typeof n.isOneWay&&(a=n.isOneWay),"undefined"!==typeof n.isDataOnly&&(c=n.isDataOnly);var f={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:a,isDataOnly:c,localPeerSdpConstraints:r,remotePeerSdpConstraints:s},sender:e.userid};return g(f.message,function(){i(function(){o(f,u)})}),f},e.publicRoomIdentifier="",e.getUserMedia=e.captureUserMedia=function(n,r){n=n||function(){};var i=r||e.session;e.dontCaptureUserMedia||y(i)?n():(i.audio||i.video||i.screen)&&(i.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:R(e)}).then(function(o){if(o.isScreen=!0,t.onGettingLocalMedia(o),!i.audio&&!i.video||R(e))n(o);else{var s={};for(var a in i)"screen"!==a&&(s[a]=i[a]);e.invokeGetUserMedia(r,n,s)}},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:R(e),video:!0,isScreen:!0},function(t){if(!i.audio&&!i.video||R(e))n(t);else{var o={};for(var s in i)"screen"!==s&&(o[s]=i[s]);e.invokeGetUserMedia(r,n,o)}}):(i.audio||i.video)&&e.invokeGetUserMedia(r,n,i))},e.onbeforeunload=function(n,r){e.closeBeforeUnload&&(e.peers.getAllParticipants().forEach(function(n){t.onNegotiationNeeded({userLeft:!0},n),e.peers[n]&&e.peers[n].peer&&e.peers[n].peer.close(),delete e.peers[n]}),r||e.closeSocket(),e.isInitiator=!1)},window.ignoreBeforeUnload?e.closeBeforeUnload=!1:(e.closeBeforeUnload=!0,window.addEventListener("beforeunload",e.onbeforeunload,!1)),e.userid=m(),e.changeUserId=function(t,n){n=n||function(){},e.userid=t||m(),e.socket.emit("changed-uuid",e.userid,n)},e.extra={},e.attachStreams=[],e.session={audio:!0,video:!0},e.enableFileSharing=!1,e.bandwidth={screen:!1,audio:!1,video:!1},e.codecs={audio:"opus",video:"VP9"},e.processSdp=function(t){return A()?t:"Safari"===DetectRTC.browser.name?t:("VP8"===e.codecs.video.toUpperCase()&&(t=D.preferCodec(t,"vp8")),"VP9"===e.codecs.video.toUpperCase()&&(t=D.preferCodec(t,"vp9")),"H264"===e.codecs.video.toUpperCase()&&(t=D.preferCodec(t,"h264")),"G722"===e.codecs.audio&&(t=D.removeNonG722(t)),"Firefox"===DetectRTC.browser.name?t:((e.bandwidth.video||e.bandwidth.screen)&&(t=D.setApplicationSpecificBandwidth(t,e.bandwidth,!!e.session.screen)),e.bandwidth.video&&(t=D.setVideoBitrates(t,{min:8*e.bandwidth.video*1024,max:8*e.bandwidth.video*1024})),e.bandwidth.audio&&(t=D.setOpusAttributes(t,{maxaveragebitrate:8*e.bandwidth.audio*1024,maxplaybackrate:8*e.bandwidth.audio*1024,stereo:1,maxptime:3})),t))},"undefined"!==typeof D&&(e.BandwidthHandler=e.CodecsHandler=D),e.mediaConstraints={audio:{mandatory:{},optional:e.bandwidth.audio?[{bandwidth:8*e.bandwidth.audio*1024||1048576}]:[]},video:{mandatory:{},optional:e.bandwidth.video?[{bandwidth:8*e.bandwidth.video*1024||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(e.mediaConstraints={audio:!0,video:!0}),a.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var t,n;if(DetectRTC.MediaDevices.forEach(function(r){"audioinput"===r.kind&&!1!==e.mediaConstraints.audio&&(t=r),"videoinput"===r.kind&&!1!==e.mediaConstraints.video&&(n=r)}),t){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.audio?e.mediaConstraints.audio.deviceId=t.id:e.mediaConstraints.audio={deviceId:t.id});1==e.mediaConstraints.audio&&(e.mediaConstraints.audio={mandatory:{},optional:[]}),e.mediaConstraints.audio.optional||(e.mediaConstraints.audio.optional=[]);var r=[{sourceId:t.id}];e.mediaConstraints.audio.optional=r.concat(e.mediaConstraints.audio.optional)}if(n){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.video?e.mediaConstraints.video.deviceId=n.id:e.mediaConstraints.video={deviceId:n.id});1==e.mediaConstraints.video&&(e.mediaConstraints.video={mandatory:{},optional:[]}),e.mediaConstraints.video.optional||(e.mediaConstraints.video.optional=[]);r=[{sourceId:n.id}];e.mediaConstraints.video.optional=r.concat(e.mediaConstraints.video.optional)}}),e.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},e.sdpSemantics=null,e.iceCandidatePoolSize=null,e.bundlePolicy=null,e.rtcpMuxPolicy=null,e.iceTransportPolicy=null,e.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},e.iceServers=N.getIceServers(e),e.candidates={host:!0,stun:!0,turn:!0},e.iceProtocols={tcp:!0,udp:!0},e.onopen=function(t){e.enableLogs&&console.info("Data connection has been opened between you & ",t.userid)},e.onclose=function(t){e.enableLogs&&console.warn("Data connection has been closed between you & ",t.userid)},e.onerror=function(t){e.enableLogs&&console.error(t.userid,"data-error",t)},e.onmessage=function(t){e.enableLogs&&console.debug("data-message",t.userid,t.data)},e.send=function(t,n){e.peers.send(t,n)},e.close=e.disconnect=e.leave=function(){e.onbeforeunload(!1,!0)},e.closeEntireSession=function(t){t=t||function(){},e.socket.emit("close-entire-session",function n(){e.getAllParticipants().length?setTimeout(n,100):(e.onEntireSessionClosed({sessionid:e.sessionid,userid:e.userid,extra:e.extra}),e.changeUserId(null,function(){e.close(),t()}))})},e.onEntireSessionClosed=function(t){e.enableLogs&&console.info("Entire session is closed: ",t.sessionid,t.extra)},e.onstream=function(t){var n=e.videosContainer;n.insertBefore(t.mediaElement,n.firstChild);var r=t.mediaElement.play();"undefined"===typeof r?setTimeout(function(){t.mediaElement.play()},2e3):r.catch(function(){}).then(function(){setTimeout(function(){t.mediaElement.play()},2e3)})},e.onstreamended=function(e){e.mediaElement||(e.mediaElement=document.getElementById(e.streamid)),e.mediaElement&&e.mediaElement.parentNode&&e.mediaElement.parentNode.removeChild(e.mediaElement)},e.direction="many-to-many",e.removeStream=function(t,n){var r;e.attachStreams.forEach(function(e){e.id===t&&(r=e)}),r?(e.peers.getAllParticipants().forEach(function(t){if(!n||t===n){var i=e.peers[t];try{i.peer.removeStream(r)}catch(o){}}}),e.renegotiate()):console.warn("No such stream exist.",t)},e.addStream=function(n,r){if(n.getTracks)return-1===e.attachStreams.indexOf(n)&&(n.streamid||(n.streamid=n.id),e.attachStreams.push(n)),void e.renegotiate(r);function i(t){n.streamCallback&&n.streamCallback(t),e.renegotiate(r)}y(n)?e.renegotiate(r):(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:R(e)}).then(function(r){r.isScreen=!0,t.onGettingLocalMedia(r),!n.audio&&!n.video||R(e)?i(r):e.invokeGetUserMedia(null,function(e){i(e)})},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:R(e),video:!0,isScreen:!0},function(t){!n.audio&&!n.video||R(e)?i(t):e.invokeGetUserMedia(null,function(e){i(e)})}):(n.audio||n.video)&&e.invokeGetUserMedia(null,i))},e.invokeGetUserMedia=function(n,r,i){i||(i=e.session),n||(n=e.mediaConstraints),_({onGettingLocalMedia:function(e){var i=n.video;i&&(i.mediaSource||i.mozMediaSource?e.isScreen=!0:i.mandatory&&i.mandatory.chromeMediaSource&&(e.isScreen=!0)),e.isScreen||(e.isVideo=!!C(e,"video").length,e.isAudio=!e.isVideo&&C(e,"audio").length),t.onGettingLocalMedia(e,function(){"function"===typeof r&&r(e)})},onLocalMediaError:function(e,n){t.onLocalMediaError(e,n)},localMediaConstraints:n||{audio:!!i.audio&&n.audio,video:!!i.video&&n.video}})},e.applyConstraints=function(t,n){if(x&&x.prototype.applyConstraints){var r;if(n)return e.streamEvents[n]&&(r=e.streamEvents[n].stream),void w(r,t);e.attachStreams.forEach(function(e){w(e,t)})}else alert("track.applyConstraints is NOT supported in your browser.")},e.replaceTrack=function(n,r,i){if(n=n||{},k.prototype.getSenders)if(n instanceof x)S(n,r,i);else{if(n instanceof b)return C(n,"video").length&&S(C(n,"video")[0],r,!0),void(C(n,"audio").length&&S(C(n,"audio")[0],r,!1));if(y(n))throw"connection.replaceTrack requires audio and/or video and/or screen.";(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:R(e)}).then(function(r){r.isScreen=!0,t.onGettingLocalMedia(r),!n.audio&&!n.video||R(e)?o(r):e.invokeGetUserMedia(null,o)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:R(e),video:!0,isScreen:!0},!n.audio&&!n.video||R(e)?o:e.invokeGetUserMedia(null,o)):(n.audio||n.video)&&e.invokeGetUserMedia(null,o))}else e.addStream(n);function o(t){e.replaceTrack(t,r,i||n.video||n.screen)}},e.resetTrack=function(t,n){t||(t=e.getAllParticipants()),"string"==typeof t&&(t=[t]),t.forEach(function(t){var r=e.peers[t].peer;"undefined"!==typeof n&&!0!==n||!r.lastVideoTrack||e.replaceTrack(r.lastVideoTrack,t,!0),"undefined"!==typeof n&&!1!==n||!r.lastAudioTrack||e.replaceTrack(r.lastAudioTrack,t,!1)})},e.renegotiate=function(n){n?t.renegotiatePeer(n):e.peers.getAllParticipants().forEach(function(e){t.renegotiatePeer(e)})},e.setStreamEndHandler=function(t,n){if(t&&t.addEventListener&&(n=!!n,!t.alreadySetEndHandler)){t.alreadySetEndHandler=!0;var r="ended";"oninactive"in t&&(r="inactive"),t.addEventListener(r,function(){if(t.idInstance&&currentUserMediaRequest.remove(t.idInstance),!n){var r=[];e.attachStreams.forEach(function(e){e.id!=t.id&&r.push(e)}),e.attachStreams=r}var i=e.streamEvents[t.streamid];if(i||(i={stream:t,streamid:t.streamid,type:n?"remote":"local",userid:e.userid,extra:e.extra,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),n&&e.peers[i.userid]){var o=e.peers[i.userid].peer;r=[];o.getRemoteStreams().forEach(function(e){e.id!=t.id&&r.push(e)}),e.peers[i.userid].streams=r}i.userid===e.userid&&"remote"===i.type||(e.peersBackup[i.userid]&&(i.extra=e.peersBackup[i.userid].extra),e.onstreamended(i),delete e.streamEvents[t.streamid])},!1)}},e.onMediaError=function(t,n){e.enableLogs&&console.error(t,n)},e.autoCloseEntireSession=!1,e.filesContainer=e.videosContainer=document.body||document.documentElement,e.isInitiator=!1,e.shareFile=t.shareFile,"undefined"!==typeof V&&V.handle(e),"undefined"!==typeof q&&q.handle(e),e.token=m,e.onNewParticipant=function(t,n){e.acceptParticipationRequest(t,n)},e.acceptParticipationRequest=function(e,n){n.successCallback&&(n.successCallback(),delete n.successCallback),t.createNewPeer(e,n)},"undefined"!==typeof F&&(e.StreamsHandler=F),e.onleave=function(e){},e.invokeSelectFileDialog=function(e){var t=new FileSelector;t.accept="*.*",t.selectSingleFile(e)},e.onmute=function(e){if(e&&e.mediaElement)if("both"===e.muteType||"video"===e.muteType){e.mediaElement.src=null;var t=e.mediaElement.pause();"undefined"!==typeof t?t.then(function(){e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}):e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}else"audio"===e.muteType&&(e.mediaElement.muted=!0)},e.onunmute=function(e){e&&e.mediaElement&&e.stream&&("both"===e.unmuteType||"video"===e.unmuteType?(e.mediaElement.poster=null,e.mediaElement.srcObject=e.stream,e.mediaElement.play()):"audio"===e.unmuteType&&(e.mediaElement.muted=!1))},e.onExtraDataUpdated=function(t){t.status="online",e.onUserStatusChanged(t,!0)},e.getAllParticipants=function(t){return e.peers.getAllParticipants(t)},"undefined"!==typeof F&&(F.onSyncNeeded=function(n,r,i){e.peers.getAllParticipants().forEach(function(e){t.onNegotiationNeeded({streamid:n,action:r,streamSyncNeeded:!0,type:i||"both"},e)})}),e.connectSocket=function(e){i(e)},e.closeSocket=function(){try{io.sockets={}}catch(t){}e.socket&&("function"===typeof e.socket.disconnect&&e.socket.disconnect(),"function"===typeof e.socket.resetProps&&e.socket.resetProps(),e.socket=null)},e.getSocket=function(t){return!t&&e.enableLogs&&console.warn("getSocket.callback paramter is required."),t=t||function(){},e.socket?t(e.socket):i(function(){t(e.socket)}),e.socket},e.getRemoteStreams=t.getRemoteStreams;var T=["selectFirst","selectAll","forEach"];if(e.streamEvents={selectFirst:function(t){return e.streamEvents.selectAll(t)[0]},selectAll:function(t){t||(t={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==t&&(t={local:!0}),"remote"==t&&(t={remote:!0}),"screen"==t&&(t={isScreen:!0}),"audio"==t&&(t={isAudio:!0}),"video"==t&&(t={isVideo:!0});var n=[];return Object.keys(e.streamEvents).forEach(function(r){var i=e.streamEvents[r];if(-1===T.indexOf(r)){var o=!0;t.local&&"local"===i.type&&(o=!1),t.remote&&"remote"===i.type&&(o=!1),t.isScreen&&i.stream.isScreen&&(o=!1),t.isVideo&&i.stream.isVideo&&(o=!1),t.isAudio&&i.stream.isAudio&&(o=!1),t.userid&&i.userid===t.userid&&(o=!1),!1===o&&n.push(i)}}),n}},e.socketURL="/",e.socketMessageEvent="RTCMultiConnection-Message",e.socketCustomEvent="RTCMultiConnection-Custom-Message",e.DetectRTC=DetectRTC,e.setCustomSocketEvent=function(t){t&&(e.socketCustomEvent=t),e.socket&&e.socket.emit("set-custom-socket-event-listener",e.socketCustomEvent)},e.getNumberOfBroadcastViewers=function(t,n){e.socket&&t&&n&&e.socket.emit("get-number-of-users-in-specific-broadcast",t,n)},e.onNumberOfBroadcastViewersUpdated=function(t){e.enableLogs&&e.isInitiator&&console.info("Number of broadcast (",t.broadcastId,") viewers",t.numberOfBroadcastViewers)},e.onUserStatusChanged=function(t,n){e.enableLogs&&!n&&console.info(t.userid,t.status)},e.getUserMediaHandler=_,e.multiPeersHandler=t,e.enableLogs=!0,e.setCustomSocketHandler=function(e){"undefined"!==typeof d&&(d=e)},e.chunkSize=4e4,e.maxParticipantsAllowed=1e3,e.disconnectWith=t.disconnectWith,e.checkPresence=function(t,n){t=t||e.sessionid,"SSEConnection"!==d.name?e.socket?e.socket.emit("check-presence",t+"",function(t,r,i){e.enableLogs&&console.log("checkPresence.isRoomExist: ",t," roomid: ",r),n(t,r,i)}):e.connectSocket(function(){e.checkPresence(t,n)}):SSEConnection.checkPresence(t,function(t,r,i){if(!e.socket)return t||(e.userid=r),void e.connectSocket(function(){n(t,r,i)});n(t,r)})},e.onReadyForOffer=function(t,n){e.multiPeersHandler.createNewPeer(t,n)},e.setUserPreferences=function(t){return e.dontAttachStream&&(t.dontAttachLocalStream=!0),e.dontGetRemoteStream&&(t.dontGetRemoteStream=!0),t},e.updateExtraData=function(){e.socket.emit("extra-data-updated",e.extra)},e.enableScalableBroadcast=!1,e.maxRelayLimitPerUser=3,e.dontCaptureUserMedia=!1,e.dontAttachStream=!1,e.dontGetRemoteStream=!1,e.onReConnecting=function(t){e.enableLogs&&console.info("ReConnecting with",t.userid,"...")},e.beforeAddingStream=function(e){return e},e.beforeRemovingStream=function(e){return e},"undefined"!==typeof isChromeExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isChromeExtensionAvailable),"undefined"!==typeof isFirefoxExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isFirefoxExtensionAvailable),"undefined"!==typeof getChromeExtensionStatus&&(e.getChromeExtensionStatus=getChromeExtensionStatus),e.modifyScreenConstraints=function(e){return e},e.onPeerStateChanged=function(t){e.enableLogs&&-1!==t.iceConnectionState.search(/closed|failed/gi)&&console.error("Peer connection is closed between you & ",t.userid,t.extra,"state:",t.iceConnectionState)},e.isOnline=!0,v("online",function(){e.isOnline=!0}),v("offline",function(){e.isOnline=!1}),e.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(e.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),e.isLowBandwidth)){if(e.bandwidth={audio:!1,video:!1,screen:!1},e.mediaConstraints.audio&&e.mediaConstraints.audio.optional&&e.mediaConstraints.audio.optional.length){var E=[];e.mediaConstraints.audio.optional.forEach(function(e){"undefined"===typeof e.bandwidth&&E.push(e)}),e.mediaConstraints.audio.optional=E}if(e.mediaConstraints.video&&e.mediaConstraints.video.optional&&e.mediaConstraints.video.optional.length){E=[];e.mediaConstraints.video.optional.forEach(function(e){"undefined"===typeof e.bandwidth&&E.push(e)}),e.mediaConstraints.video.optional=E}}e.getExtraData=function(t,n){if(!t)throw"remoteUserId is required.";if("function"!==typeof n)return e.peers[t]?e.peers[t].extra:e.peersBackup[t]?e.peersBackup[t].extra:{};e.socket.emit("get-remote-user-extra-data",t,function(e,t,r){n(e,t,r)})},a.autoOpenOrJoin&&e.openOrJoin(e.sessionid),e.onUserIdAlreadyTaken=function(t,n){e.close(),e.closeSocket(),e.isInitiator=!1,e.userid=e.token(),e.join(e.sessionid),e.enableLogs&&console.warn("Userid already taken.",t,"Your new userid:",e.userid)},e.trickleIce=!0,e.version="3.6.9",e.onSettingLocalDescription=function(t){e.enableLogs&&console.info("Set local description for remote user",t.userid)},e.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},e.autoCreateMediaElement=!0,e.password=null,e.setPassword=function(t,n){n=n||function(){},e.socket?e.socket.emit("set-password",t,n):(e.password=t,n(!0,e.sessionid,null))},e.onSocketDisconnect=function(t){e.enableLogs&&console.warn("socket.io connection is closed")},e.onSocketError=function(t){e.enableLogs&&console.warn("socket.io connection is failed")},e.errors={ROOM_NOT_AVAILABLE:"Room not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"Room permission denied",ROOM_FULL:"Room full",DID_NOT_JOIN_ANY_ROOM:"Did not join any room yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};e.exports=t=s,i=[],o=function(){return s}.apply(t,i),void 0===o||(e.exports=o)}).call(this,n("c8ba"),n("f28c"))},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e6d0:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[e._m(0),n("div",{staticClass:"columns game-options"},[n("div",{staticClass:"column game-option",on:{click:e.startBattleMode}},[n("h4",[e._v("Battle Mode")]),n("p",[e._v("A three-round match between two witty teams for one unholy prize.")])]),n("div",{staticClass:"column game-option",on:{click:e.startPartyMode}},[n("h4",[e._v("Party Mode")]),n("p",[e._v("A never-ending orgasm of BattleSlides.")])])]),n("div",{staticClass:"files"},[n("p",[e._v("While you wait... Add your own photos and videos! They may just pop up in one of these presentations... Go to https://adunndevster.github.io/battleslides-image")]),n("div",{staticClass:"columns files-status"},[n("div",{staticClass:"column"},[n("div",[e._v("Audience: "+e._s(e.AudienceCount))])]),n("div",{staticClass:"column"},[n("div",[e._v("Files Received: "+e._s(e.FilesReceived))])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bs-title"},[r("img",{attrs:{src:n("8b55")}})])}],o=(n("7f7f"),n("0cf1")),s=n("5f86");n("a481"),n("5df3"),n("1c4c"),n("ac6a");var a={name:"title-screen",data:function(){return{FilesReceived:0,AudienceCount:0}},mounted:function(){window.getExternalIceServers=!0;o["d"].CleanSlideData(),window.onerror=console.error=function(){var e=JSON.stringify(arguments);-1===e.indexOf("Blocked a frame with origin")&&alert("Error:\n"+e)}},methods:{startBattleMode:function(){o["d"].SetupBattleModeGame(),s["a"].push("intro-screen")},startPartyMode:function(){o["d"].SetupPartyModeGame(),s["a"].push("intro-screen")},setFilesReceived:function(e){this.FilesReceived=e}}},c=a,d=(n("065d"),n("2877")),u=Object(d["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},f1ae:function(e,t,n){"use strict";var r=n("86cc"),i=n("4630");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},f28c:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function c(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}})();var d,u=[],f=!1,l=-1;function p(){f&&d&&(f=!1,d.length?u=d.concat(u):l=-1,u.length&&m())}function m(){if(!f){var e=a(p);f=!0;var t=u.length;while(t){d=u,u=[];while(++l<t)d&&d[l].run();l=-1,t=u.length}d=null,f=!1,c(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||f||a(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}}]);
//# sourceMappingURL=about.70fd5e53.js.map