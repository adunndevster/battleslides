(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{cd68:function(e,n,t){"use strict";(function(t,o){var i,r,s=function(s,a){var d="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";function c(e,n){function t(e){return!e.audio&&!e.video&&!e.screen&&e.data}var o="";o+="?userid="+e.userid,o+="&sessionid="+e.sessionid,o+="&msgEvent="+e.socketMessageEvent,o+="&socketCustomEvent="+e.socketCustomEvent,o+="&autoCloseEntireSession="+!!e.autoCloseEntireSession,!0===e.session.broadcast&&(o+="&oneToMany=true"),o+="&maxParticipantsAllowed="+e.maxParticipantsAllowed,e.enableScalableBroadcast&&(o+="&enableScalableBroadcast=true",o+="&maxRelayLimitPerUser="+(e.maxRelayLimitPerUser||2)),o+="&extra="+JSON.stringify(e.extra||{}),e.socketCustomParameters&&(o+=e.socketCustomParameters);try{io.sockets={}}catch(d){}if(e.socketURL||(e.socketURL="/"),"/"!=e.socketURL.substr(e.socketURL.length-1,1))throw'"socketURL" MUST end with a slash.';e.enableLogs&&("/"==e.socketURL?console.info("socket.io url is: ",location.origin+"/"):console.info("socket.io url is: ",e.socketURL));try{e.socket=io(e.socketURL+o)}catch(d){e.socket=io.connect(e.socketURL+o,e.socketOptions)}var i=e.multiPeersHandler;function r(n,t){e.peersBackup[n]||(e.peersBackup[n]={userid:n,extra:{}}),e.peersBackup[n].extra=t}function s(n){if(n.remoteUserId==e.userid)if(e.peers[n.sender]&&e.peers[n.sender].extra!=n.message.extra&&(e.peers[n.sender].extra=n.extra,e.onExtraDataUpdated({userid:n.sender,extra:n.extra}),r(n.sender,n.extra)),n.message.streamSyncNeeded&&e.peers[n.sender]){var o=e.streamEvents[n.message.streamid];if(!o||!o.stream)return;var a=n.message.action;if("ended"===a||"inactive"===a||"stream-removed"===a)return e.peersBackup[o.userid]&&(o.extra=e.peersBackup[o.userid].extra),void e.onstreamended(o);var d="both"!=n.message.type?n.message.type:null;"function"==typeof o.stream[a]&&o.stream[a](d)}else if("dropPeerConnection"!==n.message){if(n.message.allParticipants)return-1===n.message.allParticipants.indexOf(n.sender)&&n.message.allParticipants.push(n.sender),void n.message.allParticipants.forEach(function(n){i[e.peers[n]?"renegotiatePeer":"createNewPeer"](n,{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:t(e.session)})});if(n.message.newParticipant){if(n.message.newParticipant==e.userid)return;if(e.peers[n.message.newParticipant])return;i.createNewPeer(n.message.newParticipant,n.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:t(e.session)})}else if(n.message.readyForOffer&&(e.attachStreams.length&&(e.waitingForLocalMedia=!1),e.waitingForLocalMedia))setTimeout(function(){s(n)},1);else if(n.message.newParticipationRequest&&n.sender!==e.userid){e.peers[n.sender]&&e.deletePeer(n.sender);var c={extra:n.extra||{},localPeerSdpConstraints:n.message.remotePeerSdpConstraints||{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:n.message.localPeerSdpConstraints||{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"!==typeof n.message.isOneWay?n.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:"undefined"!==typeof n.message.isDataOnly?n.message.isDataOnly:t(e.session),dontGetRemoteStream:"undefined"!==typeof n.message.isOneWay?n.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,dontAttachLocalStream:!!n.message.dontGetRemoteStream,connectionDescription:n,successCallback:function(){}};e.onNewParticipant(n.sender,c)}else{if(n.message.changedUUID&&e.peers[n.message.oldUUID]&&(e.peers[n.message.newUUID]=e.peers[n.message.oldUUID],delete e.peers[n.message.oldUUID]),n.message.userLeft)return i.onUserLeft(n.sender),void(n.message.autoCloseEntireSession&&e.leave());i.addNegotiatedMessage(n.message,n.sender)}}else e.deletePeer(n.sender)}e.socket.on("extra-data-updated",function(n,t){e.peers[n]&&(e.peers[n].extra=t,e.onExtraDataUpdated({userid:n,extra:t}),r(n,t))}),e.socket.on(e.socketMessageEvent,s);var a=!1;e.socket.resetProps=function(){a=!1},e.socket.on("connect",function(){a||(a=!0,e.enableLogs&&console.info("socket.io connection is opened."),setTimeout(function(){e.socket.emit("extra-data-updated",e.extra)},1e3),n&&n(e.socket))}),e.socket.on("disconnect",function(n){e.onSocketDisconnect(n)}),e.socket.on("error",function(n){e.onSocketError(n)}),e.socket.on("user-disconnected",function(n){n!==e.userid&&(e.onUserStatusChanged({userid:n,status:"offline",extra:e.peers[n]&&e.peers[n].extra||{}}),e.deletePeer(n))}),e.socket.on("user-connected",function(n){n!==e.userid&&e.onUserStatusChanged({userid:n,status:"online",extra:e.peers[n]&&e.peers[n].extra||{}})}),e.socket.on("closed-entire-session",function(n,t){e.leave(),e.onEntireSessionClosed({sessionid:n,userid:n,extra:t})}),e.socket.on("userid-already-taken",function(n,t){e.onUserIdAlreadyTaken(n,t)}),e.socket.on("logs",function(n){e.enableLogs&&console.debug("server-logs",n)}),e.socket.on("number-of-broadcast-viewers-updated",function(n){e.onNumberOfBroadcastViewersUpdated(n)}),e.socket.on("set-isInitiator-true",function(n){n==e.sessionid&&(e.isInitiator=!0)})}function u(e){var n=this,t=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];function o(){e.fbr=new FileBufferReader,e.fbr.onProgress=function(n){e.onFileProgress(n)},e.fbr.onBegin=function(n){e.onFileStart(n)},e.fbr.onEnd=function(n){e.onFileEnd(n)}}e.peers={getLength:function(){var e=0;for(var n in this)-1==t.indexOf(n)&&e++;return e},selectFirst:function(){var e;for(var n in this)-1==t.indexOf(n)&&(e=this[n]);return e},getAllParticipants:function(e){var n=[];for(var o in this)-1==t.indexOf(o)&&o!=e&&n.push(o);return n},forEach:function(n){this.getAllParticipants().forEach(function(t){n(e.peers[t])})},send:function(t,o){var i=this;if(!S(t.size)&&!S(t.type)){if(e.enableFileSharing)return void n.shareFile(t,o);"string"!==typeof t&&(t=JSON.stringify(t))}if("text"===t.type||t instanceof ArrayBuffer||t instanceof DataView){if("text"===t.type&&(t=JSON.stringify(t)),o){var r=e.peers[o];if(r)return r.channels.length?void r.channels.forEach(function(e){e.send(t)}):(e.peers[o].createDataChannel(),e.renegotiate(o),void setTimeout(function(){i.send(t,o)},3e3))}this.getAllParticipants().forEach(function(n){if(!i[n].channels.length)return e.peers[n].createDataChannel(),e.renegotiate(n),void setTimeout(function(){i[n].channels.forEach(function(e){e.send(t)})},3e3);i[n].channels.forEach(function(e){e.send(t)})})}else q.send({text:t,channel:this,connection:e,remoteUserId:o})}},this.uuid=e.userid,this.getLocalConfig=function(t,i,r){return r||(r={}),{streamsToShare:r.streamsToShare||{},rtcMultiConnection:e,connectionDescription:r.connectionDescription,userid:i,localPeerSdpConstraints:r.localPeerSdpConstraints,remotePeerSdpConstraints:r.remotePeerSdpConstraints,dontGetRemoteStream:!!r.dontGetRemoteStream,dontAttachLocalStream:!!r.dontAttachLocalStream,renegotiatingPeer:!!r.renegotiatingPeer,peerRef:r.peerRef,channels:r.channels||[],onLocalSdp:function(e){n.onNegotiationNeeded(e,i)},onLocalCandidate:function(t){t=I.processCandidates(e,t),t&&n.onNegotiationNeeded(t,i)},remoteSdp:t,onDataChannelMessage:function(t){if(!e.fbr&&e.enableFileSharing&&o(),"string"!=typeof t&&e.enableFileSharing){var r=this;t instanceof ArrayBuffer||t instanceof DataView?e.fbr.convertToObject(t,function(e){r.onDataChannelMessage(e)}):t.readyForNextChunk?e.fbr.getNextChunk(t,function(n,t){e.peers[i].channels.forEach(function(e){e.send(n)})},i):t.chunkMissing?e.fbr.chunkMissing(t):e.fbr.addChunk(t,function(n){e.peers[i].peer.channel.send(n)})}else n.onDataChannelMessage(t,i)},onDataChannelError:function(e){n.onDataChannelError(e,i)},onDataChannelOpened:function(e){n.onDataChannelOpened(e,i)},onDataChannelClosed:function(e){n.onDataChannelClosed(e,i)},onRemoteStream:function(t){e.peers[i]&&e.peers[i].streams.push(t),n.onGettingRemoteMedia(t,i)},onRemoteStreamRemoved:function(e){n.onRemovingRemoteMedia(e,i)},onPeerStateChanged:function(e){n.onPeerStateChanged(e),"new"===e.iceConnectionState&&n.onNegotiationStarted(i,e),"connected"===e.iceConnectionState&&n.onNegotiationCompleted(i,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(n.onUserLeft(i),n.disconnectWith(i))}}},this.createNewPeer=function(n,t){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(t=t||{},e.isInitiator&&e.session.audio&&"two-way"===e.session.audio&&!t.streamsToShare&&(t.isOneWay=!1,t.isDataOnly=!1,t.session=e.session),!t.isOneWay&&!t.isDataOnly)return t.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:t},n);t=e.setUserPreferences(t,n);var o=this.getLocalConfig(null,n,t);e.peers[n]=new L(o)}},this.createAnsweringPeer=function(n,t,o){o=e.setUserPreferences(o||{},t);var i=this.getLocalConfig(n,t,o);e.peers[t]=new L(i)},this.renegotiatePeer=function(n,t,o){if(e.peers[n]){t||(t={}),t.renegotiatingPeer=!0,t.peerRef=e.peers[n].peer,t.channels=e.peers[n].channels;var i=this.getLocalConfig(o,n,t);e.peers[n]=new L(i)}else e.enableLogs&&console.error("Peer ("+n+") does not exist. Renegotiation skipped.")},this.replaceTrack=function(n,t,o){if(!e.peers[t])throw"This peer ("+t+") does not exist.";var i=e.peers[t].peer;i.getSenders&&"function"===typeof i.getSenders&&i.getSenders().length?i.getSenders().forEach(function(i){o&&"video"===i.track.kind&&(e.peers[t].peer.lastVideoTrack=i.track,i.replaceTrack(n)),o||"audio"!==i.track.kind||(e.peers[t].peer.lastAudioTrack=i.track,i.replaceTrack(n))}):(console.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(t))},this.onNegotiationNeeded=function(e,n){},this.addNegotiatedMessage=function(t,o){if(t.type&&t.sdp)return"answer"==t.type&&e.peers[o]&&e.peers[o].addRemoteSdp(t),"offer"==t.type&&(t.renegotiatingPeer?this.renegotiatePeer(o,null,t):this.createAnsweringPeer(t,o)),void(e.enableLogs&&console.log("Remote peer's sdp:",t.sdp));if(t.candidate)return e.peers[o]&&e.peers[o].addRemoteCandidate(t),void(e.enableLogs&&console.log("Remote peer's candidate pairs:",t.candidate));if(t.enableMedia){e.session=t.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),t.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var i={};e.attachStreams.forEach(function(e){i[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),t.userPreferences.streamsToShare=i,n.onNegotiationNeeded({readyForOffer:!0,userPreferences:t.userPreferences},o)}t.readyForOffer&&e.onReadyForOffer(o,t.userPreferences)},this.onGettingRemoteMedia=function(e,n){},this.onRemovingRemoteMedia=function(e,n){},this.onGettingLocalMedia=function(e){},this.onLocalMediaError=function(n,t){e.onMediaError(n,t)},this.shareFile=function(n,t){o(),e.fbr.readAsArrayBuffer(n,function(n){var o=e.getAllParticipants();t&&(o=[t]),o.forEach(function(t){e.fbr.getNextChunk(n,function(n){e.peers[t].channels.forEach(function(e){e.send(n)})},t)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15e3:e.chunkSize||0})};var i=new F(e);this.onDataChannelMessage=function(n,t){i.receive(JSON.parse(n),t,e.peers[t]?e.peers[t].extra:{})},this.onDataChannelClosed=function(n,t){n.userid=t,n.extra=e.peers[t]?e.peers[t].extra:{},e.onclose(n)},this.onDataChannelError=function(n,t){n.userid=t,event.extra=e.peers[t]?e.peers[t].extra:{},e.onerror(n)},this.onDataChannelOpened=function(n,t){e.peers[t].channels.length?e.peers[t].channels=[n]:(e.peers[t].channels.push(n),e.onopen({userid:t,extra:e.peers[t]?e.peers[t].extra:{},channel:n}))},this.onPeerStateChanged=function(n){e.onPeerStateChanged(n)},this.onNegotiationStarted=function(e,n){},this.onNegotiationCompleted=function(e,n){},this.getRemoteStreams=function(n){return n=n||e.peers.getAllParticipants()[0],e.peers[n]?e.peers[n].streams:[]}}function f(e,n,t){if("undefined"!==typeof CustomEvent){var o={arguments:t,__exposedProps__:t},i=new CustomEvent(n,o);e.dispatchEvent(i)}}function l(e,n){if(n.stream&&k(n.stream,"audio").length){if(!e||!n)throw"Both arguments are required.";if(e.onspeaking&&e.onsilence){if("undefined"===typeof hark)throw"hark.js not found.";hark(n.stream,{onspeaking:function(){e.onspeaking(n)},onsilence:function(){e.onsilence(n)},onvolumechange:function(t,o){e.onvolumechange&&e.onvolumechange(merge({volume:t,threshold:o},n))}})}}}function m(e,n){n.stream&&n.stream&&n.stream.addEventListener&&(n.stream.addEventListener("mute",function(t){t=e.streamEvents[n.streamid],t.session={audio:"audio"===t.muteType,video:"video"===t.muteType},e.onmute(t)},!1),n.stream.addEventListener("unmute",function(t){t=e.streamEvents[n.streamid],t.session={audio:"audio"===t.unmuteType,video:"video"===t.unmuteType},e.onunmute(t)},!1))}function p(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),n="",t=0,o=e.length;t<o;t++)n+=e[t].toString(36);return n}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}function v(e,n,t){if(t.autoCreateMediaElement){var o=!1;k(e,"video").length||e.isVideo||e.isScreen||(o=!0),"Firefox"===DetectRTC.browser.name&&(t.session.video||t.session.screen)&&(o=!1);var i=document.createElement(o?"audio":"video");if(i.srcObject=e,i.setAttribute("autoplay",!0),i.setAttribute("playsinline",!0),i.setAttribute("controls",!0),i.setAttribute("muted",!1),i.setAttribute("volume",1),"Firefox"===DetectRTC.browser.name){var r="ended";"oninactive"in i&&(r="inactive"),i.addEventListener(r,function(){if(currentUserMediaRequest.remove(e.idInstance),"local"===e.type){r="ended","oninactive"in e&&(r="inactive"),V.onSyncNeeded(e.streamid,r),t.attachStreams.forEach(function(n,o){e.streamid===n.streamid&&delete t.attachStreams[o]});var n=[];t.attachStreams.forEach(function(e){e&&n.push(e)}),t.attachStreams=n;var o=t.streamEvents[e.streamid];if(o)return void t.onstreamended(o);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var s=i.play();if("undefined"!==typeof s){var a=!1;setTimeout(function(){a||(a=!0,n(i))},1e3),s.then(function(){a||(a=!0,n(i))}).catch(function(e){a||(a=!0,n(i))})}else n(i)}else n({})}function g(e,n){window.removeEventListener(e,n),window.addEventListener(e,n,!1)}function h(e){var n=[];return e.forEach(function(e){e&&n.push(e)}),n}function w(e){return!e.audio&&!e.video&&!e.screen&&e.data}function S(e){return"undefined"===typeof e}function y(e){return"string"===typeof e}(function(e){e&&"undefined"===typeof window&&"undefined"!==typeof t&&(t.navigator={userAgent:d,getUserMedia:function(){}},t.console||(t.console={}),"undefined"===typeof t.console.debug&&(t.console.debug=t.console.info=t.console.error=t.console.log=t.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},document.addEventListener=document.removeEventListener=e.addEventListener=e.removeEventListener=function(){},e.HTMLVideoElement=e.HTMLMediaElement=function(){}),"undefined"===typeof io&&(e.io=function(){return{on:function(e,n){n=n||function(){},"connect"===e&&n()},emit:function(e,n,t){t=t||function(){},"open-room"!==e&&"join-room"!==e||t(!0,n.sessionid,null)}}}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof URL&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=t)})("undefined"!==typeof t?t:null),function(){var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",a="object"===typeof o&&"object"===typeof o.versions&&o.versions.node&&!o.browser;if(a){var d=o.versions.node.toString().replace("v","");s="Nodejs/"+d+" (NodeOS) AppleWebKit/"+d+" (KHTML, like Gecko) Nodejs/"+d+" Nodejs/"+d}(function(e){"undefined"===typeof window&&("undefined"===typeof window&&"undefined"!==typeof t&&(t.navigator={userAgent:s,getUserMedia:function(){}},e.window=t),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}))})("undefined"!==typeof t?t:window);var c=window.navigator;"undefined"!==typeof c?("undefined"!==typeof c.webkitGetUserMedia&&(c.getUserMedia=c.webkitGetUserMedia),"undefined"!==typeof c.mozGetUserMedia&&(c.getUserMedia=c.mozGetUserMedia)):c={getUserMedia:function(){},userAgent:s};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(c.userAgent||""),f=-1!==c.userAgent.indexOf("Edge")&&(!!c.msSaveOrOpenBlob||!!c.msSaveBlob),l=!!window.opera||c.userAgent.indexOf(" OPR/")>=0,m="undefined"!==typeof window.InstallTrigger,p=/^((?!chrome|android).)*safari/i.test(c.userAgent),v=!!window.chrome&&!l,g="undefined"!==typeof document&&!!document.documentMode&&!f;function h(){c.appVersion;var e,n,t,o=c.userAgent,i=c.appName,r=""+parseFloat(c.appVersion),s=parseInt(c.appVersion,10);if(p&&!v&&-1!==o.indexOf("CriOS")&&(p=!1,v=!0),l){i="Opera";try{r=c.userAgent.split("OPR/")[1].split(" ")[0],s=r.split(".")[0]}catch(a){r="0.0.0.0",s=0}}else g?(n=o.indexOf("rv:"),n>0?r=o.substring(n+3):(n=o.indexOf("MSIE"),r=o.substring(n+5)),i="IE"):v?(n=o.indexOf("Chrome"),i="Chrome",r=o.substring(n+7)):p?(n=o.indexOf("Safari"),i="Safari",r=o.substring(n+7),-1!==(n=o.indexOf("Version"))&&(r=o.substring(n+8)),-1!==c.userAgent.indexOf("Version/")&&(r=c.userAgent.split("Version/")[1].split(" ")[0])):m?(n=o.indexOf("Firefox"),i="Firefox",r=o.substring(n+8)):(e=o.lastIndexOf(" ")+1)<(n=o.lastIndexOf("/"))&&(i=o.substring(e,n),r=o.substring(n+1),i.toLowerCase()===i.toUpperCase()&&(i=c.appName));return f&&(i="Edge",r=c.userAgent.split("Edge/")[1]),-1!==(t=r.search(/[; \)]/))&&(r=r.substring(0,t)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(c.appVersion),s=parseInt(c.appVersion,10)),{fullVersion:r,version:s,name:i,isPrivateBrowsing:!1}}function w(e,n){var t=0,o=50,i=!1,r=window.setInterval(function(){e()&&(window.clearInterval(r),n(i)),t++>o&&(window.clearInterval(r),i=!0,n(i))},10)}function S(e){var n=e.toLowerCase();if(0===n.indexOf("msie")&&0===n.indexOf("trident"))return!1;var t=/(?:msie|rv:)\s?([\d\.]+)/.exec(n);return!!(t&&parseInt(t[1],10)>=10)}function y(e){var n;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){n=!1},function(e){n=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var t;try{t=window.indexedDB.open("test"),t.onerror=function(){return!0}}catch(o){n=!0}"undefined"===typeof n&&w(function(){return"done"===t.readyState},function(e){e||(n=!t.result)})}else if(S(window.navigator.userAgent)){n=!1;try{window.indexedDB||(n=!0)}catch(o){n=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(o){n=!0}"undefined"===typeof n&&(n=!1,window.localStorage.removeItem("test"))}}catch(o){n=!1}w(function(){return"undefined"!==typeof n},function(t){e(n)})}var C={Android:function(){return c.userAgent.match(/Android/i)},BlackBerry:function(){return c.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return c.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return c.userAgent.match(/Opera Mini/i)},Windows:function(){return c.userAgent.match(/IEMobile/i)},any:function(){return C.Android()||C.BlackBerry()||C.iOS()||C.Opera()||C.Windows()},getOsName:function(){var e="Unknown OS";return C.Android()&&(e="Android"),C.BlackBerry()&&(e="BlackBerry"),C.iOS()&&(e="iOS"),C.Opera()&&(e="Opera Mini"),C.Windows()&&(e="Windows"),e}};function b(){for(var e,n="-",t=c.appVersion,o=c.userAgent,i=n,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],s=0;e=r[s];s++)if(e.r.test(o)){i=e.s;break}var a=n;switch(/Windows/.test(i)&&(/Windows (.*)/.test(i)&&(a=/Windows (.*)/.exec(i)[1]),i="Windows"),i){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(o)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(o)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(o)&&(a=/Android ([\.\_\d]+)/.exec(o)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(o)&&(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),a=a[1]+"."+a[2]+"."+(0|a[3]));break}return{osName:i,osVersion:a}}var k="Unknown OS",T="Unknown OS Version";function R(e){e=(e||c.userAgent).toLowerCase();var n=e.match(/android\s([0-9\.]*)/);return!!n&&n[1]}var E=b();E&&E.osName&&"-"!=E.osName?(k=E.osName,T=E.osVersion):C.any()&&(k=C.getOsName(),"Android"==k&&(T=R()));a="object"===typeof o&&"object"===typeof o.versions&&o.versions.node;"Unknown OS"===k&&a&&(k="Nodejs",T=o.versions.node.toString().replace("v",""));var x=!1,M=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!==typeof document&&"function"===typeof document.createElement&&(!x&&e in document.createElement("canvas")&&(x=!0),!M&&e in document.createElement("video")&&(M=!0))});var P=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,O=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,D=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;function L(e,n){if(z.isWebRTCSupported){var t=!0,o=!0;U(function(n){n?n.match(P)?(t=!1,e("Local: "+n,t,o)):n.match(D)?(o=!1,e("Public: "+n,t,o)):e("Public: "+n,t,o):e()},n)}}function U(e,n){if("undefined"!==typeof document&&"function"===typeof document.getElementById){var t={},o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!o){var i=document.getElementById("iframe");if(!i)return;var r=i.contentWindow;o=r.RTCPeerConnection||r.mozRTCPeerConnection||r.webkitRTCPeerConnection}if(o){var s=null;"Chrome"===z.browser&&z.browser.version<58&&(s={optional:[{RtpDataChannels:!0}]});var a={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},d=new o(a,s);if(n&&(d.addStream?d.addStream(n):d.addTrack&&n.getTracks()[0]&&d.addTrack(n.getTracks()[0],n)),d.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!n)try{d.createDataChannel("sctp",{})}catch(f){}z.isPromisesSupported?d.createOffer().then(function(e){d.setLocalDescription(e).then(u)}):d.createOffer(function(e){d.setLocalDescription(e,u,function(){})},function(){})}}function c(n){if(n){var o=O.exec(n);if(o){var i=o[1],r=n.match(P),s=!0;void 0===t[i]&&e(i,r,s),t[i]=!0}}else e()}function u(){var e=d.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&c(e)})}}var I=[],N=[],W=[],B=[];c.mediaDevices&&c.mediaDevices.enumerateDevices&&(c.enumerateDevices=function(e){var n=c.mediaDevices.enumerateDevices();n&&n.then?c.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var V=!1;"undefined"!==typeof A&&"getSources"in A?V=!0:c.mediaDevices&&c.mediaDevices.enumerateDevices&&(V=!0);var F=!1,q=!1,G=!1,j=!1,H=!1;function _(e){if(V)if(!c.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(c.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!c.enumerateDevices&&c.enumerateDevices&&(c.enumerateDevices=c.enumerateDevices.bind(c)),c.enumerateDevices){I=[],N=[],W=[],B=[],F=!1,q=!1,G=!1,j=!1,H=!1;var n={};c.enumerateDevices(function(t){t.forEach(function(e){var t={};for(var o in e)try{"function"!==typeof e[o]&&(t[o]=e[o])}catch(i){}n[t.deviceId+t.label+t.kind]||("audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput"),t.deviceId||(t.deviceId=t.id),t.id||(t.id=t.deviceId),t.label?("videoinput"!==t.kind||H||(H=!0),"audioinput"!==t.kind||j||(j=!0)):(t.isCustomLabel=!0,"videoinput"===t.kind?t.label="Camera "+(B.length+1):"audioinput"===t.kind?t.label="Microphone "+(N.length+1):"audiooutput"===t.kind?t.label="Speaker "+(W.length+1):t.label="Please invoke getUserMedia once.","undefined"!==typeof z&&z.browser.isChrome&&z.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.label="HTTPs is required to get label of this "+t.kind+" device.")),"audioinput"===t.kind&&(F=!0,-1===N.indexOf(t)&&N.push(t)),"audiooutput"===t.kind&&(q=!0,-1===W.indexOf(t)&&W.push(t)),"videoinput"===t.kind&&(G=!0,-1===B.indexOf(t)&&B.push(t)),I.push(t),n[t.deviceId+t.label+t.kind]=t)}),"undefined"!==typeof z&&(z.MediaDevices=I,z.hasMicrophone=F,z.hasSpeakers=q,z.hasWebcam=G,z.isWebsiteHasWebcamPermissions=H,z.isWebsiteHasMicrophonePermissions=j,z.audioInputDevices=N,z.audioOutputDevices=W,z.videoInputDevices=B),e&&e()})}else e&&e();else e&&e()}var z=window.DetectRTC||{};z.browser=h(),y(function(e){z.browser.isPrivateBrowsing=!!e}),z.browser["is"+z.browser.name]=!0,z.osName=k,z.osVersion=T;"object"===typeof o&&"object"===typeof o.versions&&o.versions["node-webkit"];var J=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){J||e in window&&(J=!0)}),z.isWebRTCSupported=J,z.isORTCSupported="undefined"!==typeof RTCIceGatherer;var X=!1;if(z.browser.isChrome&&z.browser.version>=35?X=!0:z.browser.isFirefox&&z.browser.version>=34?X=!0:z.browser.isEdge&&z.browser.version>=17?X=!0:"Android"===z.osName&&z.browser.isChrome&&(X=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var K="undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);K&&(z.browser.isChrome||z.browser.isEdge||z.browser.isOpera)?X=!1:z.browser.isFirefox&&(X=!1)}z.isScreenCapturingSupported=X;var Y={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){Y.isSupported||e in window&&(Y.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(Y.isCreateMediaStreamSourceSupported=!0))}),z.isAudioContextSupported=Y.isSupported,z.isCreateMediaStreamSourceSupported=Y.isCreateMediaStreamSourceSupported;var $=!1;z.browser.isChrome&&z.browser.version>31&&($=!0),z.isRtpDataChannelsSupported=$;var Q=!1;z.browser.isFirefox&&z.browser.version>28?Q=!0:z.browser.isChrome&&z.browser.version>25?Q=!0:z.browser.isOpera&&z.browser.version>=11&&(Q=!0),z.isSctpDataChannelsSupported=Q,z.isMobileDevice=u;var Z=!1;c.getUserMedia?Z=!0:c.mediaDevices&&c.mediaDevices.getUserMedia&&(Z=!0),z.browser.isChrome&&z.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(Z="Requires HTTPs"),"Nodejs"===z.osName&&(Z=!1),z.isGetUserMediaSupported=Z;var ee="";if(screen.width){var ne=screen.width?screen.width:"",te=screen.height?screen.height:"";ee+=ne+" x "+te}function oe(e,n){function t(e,n){return 0==n?e:t(n,e%n)}var o=t(e,n);return e/o/(n/o)}z.displayResolution=ee,z.displayAspectRatio=oe(screen.width,screen.height).toFixed(2),z.isCanvasSupportsStreamCapturing=x,z.isVideoSupportsStreamCapturing=M,"Chrome"==z.browser.name&&z.browser.version>=53&&(z.isCanvasSupportsStreamCapturing||(z.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),z.isVideoSupportsStreamCapturing||(z.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),z.DetectLocalIPAddress=L,z.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,z.isWebSocketsBlocked=!z.isWebSocketsSupported,"Nodejs"===z.osName&&(z.isWebSocketsSupported=!0,z.isWebSocketsBlocked=!1),z.checkWebSocketsSupport=function(e){e=e||function(){};try{var n,t=new WebSocket("wss://echo.websocket.org:443/");t.onopen=function(){z.isWebSocketsBlocked=!1,n=(new Date).getTime(),t.send("ping")},t.onmessage=function(){z.WebsocketLatency=(new Date).getTime()-n+"ms",e(),t.close(),t=null},t.onerror=function(){z.isWebSocketsBlocked=!0,e()}}catch(o){z.isWebSocketsBlocked=!0,e()}},z.load=function(e){e=e||function(){},_(e)},z.MediaDevices="undefined"!==typeof I?I:[],z.hasMicrophone=F,z.hasSpeakers=q,z.hasWebcam=G,z.isWebsiteHasWebcamPermissions=H,z.isWebsiteHasMicrophonePermissions=j,z.audioInputDevices=N,z.audioOutputDevices=W,z.videoInputDevices=B;var ie=!1;"undefined"!==typeof document&&"function"===typeof document.createElement&&"setSinkId"in document.createElement("video")&&(ie=!0),z.isSetSinkIdSupported=ie;var re=!1;z.browser.isFirefox&&"undefined"!==typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(re=!0):z.browser.isChrome&&"undefined"!==typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(re=!0),z.isRTPSenderReplaceTracksSupported=re;var se=!1;z.browser.isFirefox&&z.browser.version>38&&(se=!0),z.isRemoteStreamProcessingSupported=se;var ae=!1;"undefined"!==typeof A&&"applyConstraints"in A.prototype&&(ae=!0),z.isApplyConstraintsSupported=ae;var de=!1;z.browser.isFirefox&&z.browser.version>=43&&(de=!0),z.isMultiMonitorScreenCapturingSupported=de,z.isPromisesSupported=!!("Promise"in window),z.version="1.3.9","undefined"===typeof z&&(window.DetectRTC={});var ce=window.MediaStream;"undefined"===typeof ce&&"undefined"!==typeof webkitMediaStream&&(ce=webkitMediaStream),z.MediaStream="undefined"!==typeof ce&&"function"===typeof ce&&Object.keys(ce.prototype),z.MediaStreamTrack="undefined"!==typeof A&&Object.keys(A.prototype);var ue=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;z.RTCPeerConnection="undefined"!==typeof ue&&Object.keys(ue.prototype),window.DetectRTC=z,e.exports=z,i=[],r=function(){return z}.apply(n,i),void 0===r||(e.exports=r)}(),"undefined"!==typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,n,t){e.attachEvent&&e.attachEvent("on"+n,t)}),window.attachEventListener=function(e,n,t,o){e.addEventListener(n,t,o)};var C=window.MediaStream;function b(e,n){return(!e.session.audio||"two-way"!==e.session.audio)&&("Firefox"===DetectRTC.browser.name&&!1!==n||!("Chrome"!==DetectRTC.browser.name||DetectRTC.browser.version<50)&&(!0===typeof n||!("undefined"!==typeof n||!e.session.audio||!e.session.screen||e.session.video)&&(n=!0,!0)))}function k(e,n){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(n||"audio")}):[]}function T(){var e=!1;try{if("undefined"===typeof RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n=new x;try{n.addTransceiver("audio"),e=!0}catch(t){}n.close()}catch(t){e=!1}return e&&R()}function R(){var e=!1;try{var n=new x({sdpSemantics:"unified-plan"});try{var t=n.getConfiguration();e="unified-plan"==t.sdpSemantics||(t.sdpSemantics,!1)}catch(o){e=!1}}catch(o){e=!1}return e}function E(){if("undefined"!==typeof cordova&&"undefined"!==typeof cordova.plugins&&"undefined"!==typeof cordova.plugins.iosrtc){var e=cordova.plugins.iosrtc;window.webkitRTCPeerConnection=e.RTCPeerConnection,window.RTCSessionDescription=e.RTCSessionDescription,window.RTCIceCandidate=e.RTCIceCandidate,window.MediaStream=e.MediaStream,window.MediaStreamTrack=e.MediaStreamTrack,navigator.getUserMedia=navigator.webkitGetUserMedia=e.getUserMedia,e.debug.enable("iosrtc*"),"function"==typeof e.selectAudioOutput&&e.selectAudioOutput(window.iOSDefaultAudioOutputDevice||"speaker"),e.registerGlobals()}}"undefined"===typeof C&&"undefined"!==typeof webkitMediaStream&&(C=webkitMediaStream),"undefined"!==typeof C&&("stop"in C.prototype||(C.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})})),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker",document.addEventListener("deviceready",E,!1),E();var x,M={};function P(e){var n={OfferToReceiveAudio:!!e.OfferToReceiveAudio,OfferToReceiveVideo:!!e.OfferToReceiveVideo};return n}"undefined"!==typeof window.RTCPeerConnection?x=window.RTCPeerConnection:"undefined"!==typeof mozRTCPeerConnection?x=mozRTCPeerConnection:"undefined"!==typeof webkitRTCPeerConnection&&(x=webkitRTCPeerConnection);var O=window.RTCSessionDescription||window.mozRTCSessionDescription,D=window.RTCIceCandidate||window.mozRTCIceCandidate,A=window.MediaStreamTrack;function L(e){if("undefined"!==typeof window.RTCPeerConnection?x=window.RTCPeerConnection:"undefined"!==typeof mozRTCPeerConnection?x=mozRTCPeerConnection:"undefined"!==typeof webkitRTCPeerConnection&&(x=webkitRTCPeerConnection),O=window.RTCSessionDescription||window.mozRTCSessionDescription,D=window.RTCIceCandidate||window.mozRTCIceCandidate,A=window.MediaStreamTrack,!x)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";var n=e.rtcMultiConnection;this.extra=e.remoteSdp?e.remoteSdp.extra:n.extra,this.userid=e.userid,this.streams=[],this.channels=e.channels||[],this.connectionDescription=e.connectionDescription,this.addStream=function(e){n.addStream(e,t.userid)},this.removeStream=function(e){n.removeStream(e,t.userid)};var t=this;e.remoteSdp&&(this.connectionDescription=e.remoteSdp.connectionDescription);var o,i={};M.sdpConstraints=P({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var r=!!e.renegotiatingPeer;e.remoteSdp&&(r=!!e.remoteSdp.renegotiatingPeer);var s=[];if(n.attachStreams.forEach(function(e){e&&s.push(e)}),r)o=e.peerRef;else{var a="all";(n.candidates.turn||n.candidates.relay)&&(n.candidates.stun||n.candidates.reflexive||n.candidates.host||(a="relay"));try{var d={iceServers:n.iceServers,iceTransportPolicy:n.iceTransportPolicy||a};"undefined"!==typeof n.iceCandidatePoolSize&&(d.iceCandidatePoolSize=n.iceCandidatePoolSize),"undefined"!==typeof n.bundlePolicy&&(d.bundlePolicy=n.bundlePolicy),"undefined"!==typeof n.rtcpMuxPolicy&&(d.rtcpMuxPolicy=n.rtcpMuxPolicy),n.sdpSemantics&&(d.sdpSemantics=n.sdpSemantics||"unified-plan"),n.iceServers&&n.iceServers.length||(d=null,n.optionalArgument=null),o=new x(d,n.optionalArgument)}catch(v){try{d={iceServers:n.iceServers};o=new x(d)}catch(v){o=new x}}}!o.getRemoteStreams&&o.getReceivers&&(o.getRemoteStreams=function(){var e=new C;return o.getReceivers().forEach(function(n){e.addTrack(n.track)}),[e]}),!o.getLocalStreams&&o.getSenders&&(o.getLocalStreams=function(){var e=new C;return o.getSenders().forEach(function(n){e.addTrack(n.track)}),[e]}),o.onicecandidate=function(i){if(i.candidate)n.trickleIce&&e.onLocalCandidate({candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex});else if(!n.trickleIce){var r=o.localDescription;e.onLocalSdp({type:r.type,sdp:r.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:t.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:n?n.extra:{},streamsToShare:m})}},s.forEach(function(i){e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream||e.dontAttachLocalStream||(i=n.beforeAddingStream(i,t),i&&(o.getLocalStreams().forEach(function(e){i&&e.id==i.id&&(i=null)}),i&&i.getTracks&&i.getTracks().forEach(function(e){try{o.addTrack(e,i)}catch(v){}})))}),o.oniceconnectionstatechange=o.onsignalingstatechange=function(){var i=t.extra;n.peers[t.userid]&&(i=n.peers[t.userid].extra||i),o&&(e.onPeerStateChanged({iceConnectionState:o.iceConnectionState,iceGatheringState:o.iceGatheringState,signalingState:o.signalingState,extra:i,userid:t.userid}),o&&o.iceConnectionState&&-1!==o.iceConnectionState.search(/closed|failed/gi)&&t.streams instanceof Array&&t.streams.forEach(function(e){var t=n.streamEvents[e.id]||{streamid:e.id,stream:e,type:"remote"};n.onstreamended(t)}))};var c={OfferToReceiveAudio:!!s.length,OfferToReceiveVideo:!!s.length};e.localPeerSdpConstraints&&(c=e.localPeerSdpConstraints),M.sdpConstraints=P(c);var u={};o.ontrack=function(n){if(n&&"track"===n.type)if(n.stream=n.streams[n.streams.length-1],n.stream.id||(n.stream.id=n.track.id),u[n.stream.id]&&"Safari"!==DetectRTC.browser.name)n.track&&(n.track.onended=function(){o&&o.onremovestream(n)});else{u[n.stream.id]=n.stream.id;var t={};e.remoteSdp&&e.remoteSdp.streamsToShare?t=e.remoteSdp.streamsToShare:e.streamsToShare&&(t=e.streamsToShare);var r=t[n.stream.id];r?(n.stream.isAudio=r.isAudio,n.stream.isVideo=r.isVideo,n.stream.isScreen=r.isScreen):(n.stream.isVideo=!!k(n.stream,"video").length,n.stream.isAudio=!n.stream.isVideo,n.stream.isScreen=!1),n.stream.streamid=n.stream.id,i[n.stream.id]=n.stream,e.onRemoteStream(n.stream),n.stream.getTracks().forEach(function(e){e.onended=function(){o&&o.onremovestream(n)}}),n.stream.onremovetrack=function(){o&&o.onremovestream(n)}}},o.onremovestream=function(n){n.stream.streamid=n.stream.id,i[n.stream.id]&&delete i[n.stream.id],e.onRemoteStreamRemoved(n.stream)},"function"!==typeof o.removeStream&&(o.removeStream=function(e){e.getTracks().forEach(function(n){o.removeTrack(n,e)})}),this.addRemoteCandidate=function(e){o.addIceCandidate(new D(e))},this.addRemoteSdp=function(e,t){t=t||function(){},"Safari"!==DetectRTC.browser.name&&(e.sdp=n.processSdp(e.sdp)),o.setRemoteDescription(new O(e)).then(t,function(o){n.enableLogs&&console.error("setRemoteDescription failed","\n",o,"\n",e.sdp),t()}).catch(function(o){n.enableLogs&&console.error("setRemoteDescription failed","\n",o,"\n",e.sdp),t()})};var f=!0;function l(n){n.binaryType="arraybuffer",n.onmessage=function(n){e.onDataChannelMessage(n.data)},n.onopen=function(){e.onDataChannelOpened(n)},n.onerror=function(n){e.onDataChannelError(n)},n.onclose=function(n){e.onDataChannelClosed(n)},n.internalSend=n.send,n.send=function(e){"open"===n.readyState&&n.internalSend(e)},o.channel=n}e.remoteSdp&&(f=!1),this.createDataChannel=function(){var e=o.createDataChannel("sctp",{});l(e)},!0!==n.session.data||r||(f?this.createDataChannel():o.ondatachannel=function(e){var n=e.channel;l(n)}),this.enableDisableVideoEncoding=function(e){var n;if(o.getSenders().forEach(function(e){n||"video"!==e.track.kind||(n=e)}),n&&n.getParameters){var t=n.getParameters();t.encodings[1]&&(t.encodings[1].active=!!e),t.encodings[2]&&(t.encodings[2].active=!!e),n.setParameters(t)}},e.remoteSdp&&(e.remoteSdp.remotePeerSdpConstraints&&(c=e.remoteSdp.remotePeerSdpConstraints),M.sdpConstraints=P(c),this.addRemoteSdp(e.remoteSdp,function(){p("createAnswer")})),"two-way"!=n.session.audio&&"two-way"!=n.session.video&&"two-way"!=n.session.screen||(M.sdpConstraints=P({OfferToReceiveAudio:"two-way"==n.session.audio||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==n.session.video||"two-way"==n.session.screen||e.remoteSdp&&e.remoteSdp.remotePeerSdpConstraints&&e.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var m={};function p(i){o[i](M.sdpConstraints).then(function(i){"Safari"!==DetectRTC.browser.name&&(i.sdp=n.processSdp(i.sdp)),o.setLocalDescription(i).then(function(){n.trickleIce&&(e.onLocalSdp({type:i.type,sdp:i.sdp,remotePeerSdpConstraints:e.remotePeerSdpConstraints||!1,renegotiatingPeer:!!e.renegotiatingPeer||!1,connectionDescription:t.connectionDescription,dontGetRemoteStream:!!e.dontGetRemoteStream,extra:n?n.extra:{},streamsToShare:m}),n.onSettingLocalDescription(t))},function(e){n.enableLogs&&console.error("setLocalDescription error",e)})},function(e){n.enableLogs&&console.error("sdp-error",e)})}o.getLocalStreams().forEach(function(e){m[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),f&&p("createOffer"),o.nativeClose=o.close,o.close=function(){if(o){try{o.nativeClose!==o.close&&o.nativeClose()}catch(v){}o=null,t.peer=null}},this.peer=o}var U=function(){function e(e,o){var i=t(e);return i.videoCodecNumbers?"vp8"===o&&i.vp8LineNumber===i.videoCodecNumbers[0]?e:"vp9"===o&&i.vp9LineNumber===i.videoCodecNumbers[0]?e:"h264"===o&&i.h264LineNumber===i.videoCodecNumbers[0]?e:(e=n(e,o,i),e):e}function n(e,n,t,o){var i="";if("vp8"===n){if(!t.vp8LineNumber)return e;i=t.vp8LineNumber}if("vp9"===n){if(!t.vp9LineNumber)return e;i=t.vp9LineNumber}if("h264"===n){if(!t.h264LineNumber)return e;i=t.h264LineNumber}var r=t.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",s=[i];return o&&(s=[]),t.videoCodecNumbers.forEach(function(e){e!==i&&s.push(e)}),r+=s.join(" "),e=e.replace(t.videoCodecNumbersOriginal,r),e}function t(e){var n={};return e.split("\n").forEach(function(e){0===e.indexOf("m=video")&&(n.videoCodecNumbers=[],e.split("SAVPF")[1].split(" ").forEach(function(t){t=t.trim(),t&&t.length&&(n.videoCodecNumbers.push(t),n.videoCodecNumbersOriginal=e)})),-1===e.indexOf("VP8/90000")||n.vp8LineNumber||(n.vp8LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("VP9/90000")||n.vp9LineNumber||(n.vp9LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("H264/90000")||n.h264LineNumber||(n.h264LineNumber=e.replace("a=rtpmap:","").split(" ")[0])}),n}function o(e){var o=t(e);return e=n(e,"vp9",o,!0),e=n(e,"vp8",o,!0),e}function i(e){if(!e||"string"!==typeof e)throw"Invalid arguments.";return e=e.replace("a=rtcp-fb:126 nack\r\n",""),e=e.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),e=e.replace("a=rtcp-fb:97 nack\r\n",""),e=e.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n"),e}function r(e,n){if(n&&n.getSenders&&n.getSenders().length){if(!e||"string"!==typeof e)throw"Invalid arguments.";n.getSenders().forEach(function(n){for(var t=n.getParameters(),o=0;o<t.codecs.length;o++)if(t.codecs[o].mimeType==e){t.codecs.unshift(t.codecs.splice(o,1));break}n.setParameters(t)})}}function s(e){return e.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")}function a(e,n,t){return n?"undefined"!==typeof isFirefox&&isFirefox?e:(t&&(n.screen?n.screen<300&&console.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):console.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),n.screen&&t&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+n.screen+"\r\n")),(n.audio||n.video)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")),n.audio&&(e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+n.audio+"\r\n")),n.screen?e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+n.screen+"\r\n"):n.video&&(e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+n.video+"\r\n")),e):e}function d(e,n,t){return c(e,0,-1,n,t)}function c(e,n,t,o,i){for(var r=-1!==t?t:e.length,s=n;s<r;++s)if(0===e[s].indexOf(o)&&(!i||-1!==e[s].toLowerCase().indexOf(i.toLowerCase())))return s;return null}function u(e){var n=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),t=e.match(n);return t&&2===t.length?t[1]:null}function f(e,n){n=n||{};var t,o=n.min,i=n.max,r=e.split("\r\n"),s=d(r,"a=rtpmap","VP8/90000");if(s&&(t=u(r[s])),!t)return e;var a,c=d(r,"a=rtpmap","rtx/90000");if(c&&(a=u(r[c])),!c)return e;var f=d(r,"a=fmtp:"+a.toString());if(null!==f){var l="\r\n";l+="a=fmtp:"+t+" x-google-min-bitrate="+(o||"228")+"; x-google-max-bitrate="+(i||"228"),r[f]=r[f].concat(l),e=r.join("\r\n")}return e}function l(e,n){n=n||{};var t,o=e.split("\r\n"),i=d(o,"a=rtpmap","opus/48000");if(i&&(t=u(o[i])),!t)return e;var r=d(o,"a=fmtp:"+t.toString());if(null===r)return e;var s="";return s+="; stereo="+("undefined"!=typeof n.stereo?n.stereo:"1"),s+="; sprop-stereo="+("undefined"!=typeof n["sprop-stereo"]?n["sprop-stereo"]:"1"),"undefined"!=typeof n.maxaveragebitrate&&(s+="; maxaveragebitrate="+(n.maxaveragebitrate||1048576)),"undefined"!=typeof n.maxplaybackrate&&(s+="; maxplaybackrate="+(n.maxplaybackrate||1048576)),"undefined"!=typeof n.cbr&&(s+="; cbr="+("undefined"!=typeof n.cbr?n.cbr:"1")),"undefined"!=typeof n.useinbandfec&&(s+="; useinbandfec="+n.useinbandfec),"undefined"!=typeof n.usedtx&&(s+="; usedtx="+n.usedtx),"undefined"!=typeof n.maxptime&&(s+="\r\na=maxptime:"+n.maxptime),o[r]=o[r].concat(s),e=o.join("\r\n"),e}function m(e){for(var n=e.split("\r\n"),t=null,o=0;o<n.length;o++)if(-1!==n[o].search("opus/48000")){var i=extractSdp(n[o],/:(\d+) opus\/48000/i);break}for(o=0;o<n.length;o++)if(-1!==n[o].search("a=fmtp")){var r=extractSdp(n[o],/a=fmtp:(\d+)/);if(r===i){t=o;break}}return null===t?e:(n[t]=n[t].concat("; stereo=1; sprop-stereo=1"),e=n.join("\r\n"),e)}return{removeVPX:o,disableNACK:i,prioritize:r,removeNonG722:s,setApplicationSpecificBandwidth:function(e,n,t){return a(e,n,t)},setVideoBitrates:function(e,n){return f(e,n)},setOpusAttributes:function(e,n){return l(e,n)},preferVP9:function(n){return e(n,"vp9")},preferCodec:e,forceStereoAudio:m}}();window.BandwidthHandler=U;var I=function(){function e(e,n){var t=n.candidate,o=e.candidates,i=o.stun,r=o.turn;if(S(o.reflexive)||(i=o.reflexive),S(o.relay)||(r=o.relay),(o.host||!t.match(/typ host/g))&&(r||!t.match(/typ relay/g))&&(i||!t.match(/typ srflx/g))){var s=e.iceProtocols;if((s.udp||!t.match(/ udp /g))&&(s.tcp||!t.match(/ tcp /g)))return e.enableLogs&&console.debug("Your candidate pairs:",t),{candidate:t,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}}}return{processCandidates:e}}(),N=function(){function e(e){var n=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}];return n}return{getIceServers:e}}();function W(e,n){e.mandatory&&e.mandatory.chromeMediaSource?n.isScreen=!0:e.mozMediaSource||e.mediaSource?n.isScreen=!0:e.video?n.isVideo=!0:e.audio&&(n.isAudio=!0)}function B(e){if(!0!==currentUserMediaRequest.mutex){currentUserMediaRequest.mutex=!0;var n=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[n])s(currentUserMediaRequest.streams[n].stream,!0);else{var t=!!/BB10|BlackBerry/i.test(navigator.userAgent||"");if(t||"undefined"===typeof navigator.mediaDevices||"function"!==typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(e.localMediaConstraints,function(e){e.streamid=e.streamid||e.id||p(),e.idInstance=n,s(e)},function(n){e.onLocalMediaError(n,e.localMediaConstraints)});if("undefined"===typeof navigator.mediaDevices){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var o,i,r=function(){};navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),o=stream},function(e){r(e),i=e}),{then:function(e){if(!o)return e,{then:function(e){i?e(i):r=e}};e(o)}}}}}if(!0===e.localMediaConstraints.isScreen){if(navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||p(),e.idInstance=n,s(e)}).catch(function(n){e.onLocalMediaError(n,e.localMediaConstraints)});else{if(!navigator.getDisplayMedia)throw new Error("getDisplayMedia API is not availabe in this browser.");navigator.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||p(),e.idInstance=n,s(e)}).catch(function(n){e.onLocalMediaError(n,e.localMediaConstraints)})}return}navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||p(),e.idInstance=n,s(e)}).catch(function(n){e.onLocalMediaError(n,e.localMediaConstraints)})}}else currentUserMediaRequest.queueRequests.push(e);function s(t,o){W(e.localMediaConstraints,t);var i="ended";"oninactive"in t&&(i="inactive"),t.addEventListener(i,function(){delete currentUserMediaRequest.streams[n],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=h(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[n]={stream:t},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&B(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(t,o)}}window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var n=this.streams[e];if(n){n=n.stream;var t=n.currentUserMediaRequestOptions;this.queueRequests.indexOf(t)&&(delete this.queueRequests[this.queueRequests.indexOf(t)],this.queueRequests=h(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e]}}};var V=function(){function e(e){if(e)return"string"===typeof e||"undefined"===typeof e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0}function n(n,o,i){if(n&&n.addEventListener){if("undefined"==typeof o||1==o){var r="ended";"oninactive"in n&&(r="inactive"),n.addEventListener(r,function(){V.onSyncNeeded(this.streamid,r)},!1)}n.mute=function(t,r){t=e(t),"undefined"!==typeof r&&(o=r),"undefined"!=typeof t&&"audio"!=t||k(n,"audio").forEach(function(e){e.enabled=!1,i.streamEvents[n.streamid].isAudioMuted=!0}),"undefined"!=typeof t&&"video"!=t||k(n,"video").forEach(function(e){e.enabled=!1}),"undefined"!=typeof o&&1!=o||V.onSyncNeeded(n.streamid,"mute",t),i.streamEvents[n.streamid].muteType=t||"both",f(n,"mute",t)},n.unmute=function(t,r){t=e(t),"undefined"!==typeof r&&(o=r),s(),"undefined"!=typeof t&&"audio"!=t||k(n,"audio").forEach(function(e){e.enabled=!0,i.streamEvents[n.streamid].isAudioMuted=!1}),"undefined"!=typeof t&&"video"!=t||(k(n,"video").forEach(function(e){e.enabled=!0}),"undefined"!==typeof t&&"video"==t&&i.streamEvents[n.streamid].isAudioMuted&&function e(t){t||(t=0),t++,t<100&&i.streamEvents[n.streamid].isAudioMuted&&(n.mute("audio"),setTimeout(function(){e(t)},50))}()),"undefined"!=typeof o&&1!=o||V.onSyncNeeded(n.streamid,"unmute",t),i.streamEvents[n.streamid].unmuteType=t||"both",f(n,"unmute",t)}}function s(){if(i.streamEvents[n.streamid].mediaElement){var e=i.streamEvents[n.streamid].mediaElement;e.volume=0,t(200,5,function(){try{e.volume+=.2}catch(n){e.volume=1}})}}}function t(e,n,o,i){i=(i||0)+1,i>=n||setTimeout(function(){o(),t(e,n,o,i)},e)}return{setHandlers:n,onSyncNeeded:function(e,n,t){}}}();function F(e){var n={};function t(t,o,i){var r=t.uuid;if(n[r]||(n[r]=[]),n[r].push(t.message),t.last){var s=n[r].join("");t.isobject&&(s=JSON.parse(s));var a=(new Date).getTime(),d=a-t.sendingTime,c={data:s,userid:o,extra:i,latency:d};e.autoTranslateText?(c.original=c.data,e.Translator.TranslateText(c.data,function(n){c.data=n,e.onmessage(c)})):e.onmessage(c),delete n[r]}}return{receive:t}}var q={send:function(e){var n=e.connection,t=e.channel,o=e.remoteUserId,i=e.text,r=n.chunkSize||1e3,s="",a=!1;y(i)||(a=!0,i=JSON.stringify(i));var d=p(),c=(new Date).getTime();function u(e,i){var f={type:"text",uuid:d,sendingTime:c};e&&(i=e,f.packets=parseInt(i.length/r)),i.length>r?f.message=i.slice(0,r):(f.message=i,f.last=!0,f.isobject=a),t.send(f,o),s=i.slice(f.message.length),s.length&&setTimeout(function(){u(null,s)},n.chunkInterval||100)}u(i)}},G=function(){function e(e){var n={};function t(e,n){if(-1!==e.position){var t=+e.position.toFixed(2).split(".")[1]||100;n.innerHTML=t+"%"}}e.onFileStart=function(t){var o=document.createElement("div");if(o.title=t.name,o.innerHTML="<label>0%</label> <progress></progress>",t.remoteUserId&&(o.innerHTML+=" (Sharing with:"+t.remoteUserId+")"),e.filesContainer||(e.filesContainer=document.body||document.documentElement),e.filesContainer.insertBefore(o,e.filesContainer.firstChild),!t.remoteUserId)return n[t.uuid]={div:o,progress:o.querySelector("progress"),label:o.querySelector("label")},void(n[t.uuid].progress.max=t.maxChunks);n[t.uuid]||(n[t.uuid]={}),n[t.uuid][t.remoteUserId]={div:o,progress:o.querySelector("progress"),label:o.querySelector("label")},n[t.uuid][t.remoteUserId].progress.max=t.maxChunks},e.onFileProgress=function(e){var o=n[e.uuid];o&&(e.remoteUserId&&(o=n[e.uuid][e.remoteUserId],!o)||(o.progress.value=e.currentPosition||e.maxChunks||o.progress.max,t(o.progress,o.label)))},e.onFileEnd=function(e){var t=n[e.uuid];if(t){if(!e.remoteUserId||(t=n[e.uuid][e.remoteUserId],t)){var o=t.div;-1!=e.type.indexOf("image")?o.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><img src="'+e.url+'" title="'+e.name+'" style="max-width: 80%;">':o.innerHTML='<a href="'+e.url+'" download="'+e.name+'">Download <strong style="color:red;">'+e.name+'</strong> </a><br /><iframe src="'+e.url+'" title="'+e.name+'" style="width: 80%;border: 0;height: inherit;margin-top:1em;"></iframe>'}}else console.error("No such progress-helper element exist.",e)}}return{handle:e}}(),j=function(){function e(e){e.autoTranslateText=!1,e.language="en",e.googKey="AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE",e.Translator={TranslateText:function(n,t){var o=document.createElement("script");o.type="text/javascript";var i=encodeURIComponent(n),r="method"+e.token();window[r]=function(e){e.data&&e.data.translations[0]&&t?t(e.data.translations[0].translatedText):e.error&&"Daily Limit Exceeded"===e.error.message?console.error('Text translation failed. Error message: "Daily Limit Exceeded."'):e.error?console.error(e.error.message):console.error(e)};var s="https://www.googleapis.com/language/translate/v2?key="+e.googKey+"&target="+(e.language||"en-US")+"&callback=window."+r+"&q="+i;o.src=s,document.getElementsByTagName("head")[0].appendChild(o)},getListOfLanguages:function(n){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE){var e=JSON.parse(t.responseText);if(e&&e.data&&e.data.languages)return void n(e.data.languages);if(e.error&&"Daily Limit Exceeded"===e.error.message)return void console.error('Text translation failed. Error message: "Daily Limit Exceeded."');if(e.error)return void console.error(e.error.message);console.error(e)}};var o="https://www.googleapis.com/language/translate/v2/languages?key="+e.googKey+"&target=en";t.open("GET",o,!0),t.send(null)}}}return{handle:e}}();(function(e){a=a||{useDefaultDevices:!0},e.channel=e.sessionid=(s||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"";var n=new u(e),t={};function o(n){e.deletePeer(n)}function i(n){if(e.socketAutoReConnect=!0,e.socket)n&&n(e.socket);else{if("undefined"===typeof c)if("undefined"!==typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else{if("undefined"===typeof PubNubConnection)throw"SocketConnection.js seems missed.";window.SocketConnection=PubNubConnection}new c(e,function(t){n&&n(e.socket)})}}function r(t,o){e.socket.emit("join-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:f(),extra:e.extra,password:"undefined"!==typeof e.password&&"object"!==typeof e.password?e.password:""},function(i,r){if(!0===i){if(e.enableLogs&&console.log("isRoomJoined: ",i," roomid: ",e.sessionid),e.peers[e.sessionid])return;n.onNegotiationNeeded(t)}!1===i&&e.enableLogs&&console.warn("isRoomJoined: ",r," roomid: ",e.sessionid),o(i,e.sessionid,r)})}function d(n){e.enableLogs&&console.log("Sending open-room signal to socket.io"),e.waitingForLocalMedia=!1,e.socket.emit("open-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:f(),extra:e.extra,identifier:e.publicRoomIdentifier,password:"undefined"!==typeof e.password&&"object"!==typeof e.password?e.password:""},function(t,o){!0===t&&(e.enableLogs&&console.log("isRoomOpened: ",t," roomid: ",e.sessionid),n(t,e.sessionid)),!1===t&&(e.enableLogs&&console.warn("isRoomOpened: ",o," roomid: ",e.sessionid),n(t,e.sessionid,o))})}function f(){try{return e.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(n){return[]}}function h(t,o){if(e.dontCaptureUserMedia||t.isDataOnly)o();else{var i={};t.localPeerSdpConstraints.OfferToReceiveAudio&&(i.audio=e.mediaConstraints.audio),t.localPeerSdpConstraints.OfferToReceiveVideo&&(i.video=e.mediaConstraints.video);var r=t.session||e.session;r.oneway&&"two-way"!==r.audio&&"two-way"!==r.video&&"two-way"!==r.screen?o():(r.oneway&&r.audio&&"two-way"===r.audio&&(r={audio:!0}),(r.audio||r.video||r.screen)&&(r.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:b(e)}).then(function(t){t.isScreen=!0,n.onGettingLocalMedia(t),!r.audio&&!r.video||b(e)?o(t):e.invokeGetUserMedia(null,o)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:b(e),video:!0,isScreen:!0},!r.audio&&!r.video||b(e)?o:e.invokeGetUserMedia(null,o)):(r.audio||r.video)&&e.invokeGetUserMedia(null,o,r)))}}function S(n,t){n?(t.audio&&k(n,"audio").forEach(function(e){e.applyConstraints(t.audio)}),t.video&&k(n,"video").forEach(function(e){e.applyConstraints(t.video)})):e.enableLogs&&console.error("No stream to applyConstraints.")}function y(t,o,i){o?n.replaceTrack(t,o,i):e.peers.getAllParticipants().forEach(function(e){n.replaceTrack(t,e,i)})}n.onGettingLocalMedia=function(n,o){if(o=o||function(){},t[n.streamid])o();else{t[n.streamid]=!0;try{n.type="local"}catch(i){}e.setStreamEndHandler(n),v(n,function(t){t.id=n.streamid,t.muted=!0,t.volume=0,-1===e.attachStreams.indexOf(n)&&e.attachStreams.push(n),"undefined"!==typeof V&&V.setHandlers(n,!0,e),e.streamEvents[n.streamid]={stream:n,type:"local",mediaElement:t,userid:e.userid,extra:e.extra,streamid:n.streamid,isAudioMuted:!0};try{l(e,e.streamEvents[n.streamid]),m(e,e.streamEvents[n.streamid]),e.onstream(e.streamEvents[n.streamid])}catch(i){}o()},e)}},n.onGettingRemoteMedia=function(n,t){try{n.type="remote"}catch(o){}e.setStreamEndHandler(n,"remote-stream"),v(n,function(o){o.id=n.streamid,"undefined"!==typeof V&&V.setHandlers(n,!1,e),e.streamEvents[n.streamid]={stream:n,type:"remote",userid:t,extra:e.peers[t]?e.peers[t].extra:{},mediaElement:o,streamid:n.streamid},m(e,e.streamEvents[n.streamid]),e.onstream(e.streamEvents[n.streamid])},e)},n.onRemovingRemoteMedia=function(n,t){var o=e.streamEvents[n.streamid];o||(o={stream:n,type:"remote",userid:t,extra:e.peers[t]?e.peers[t].extra:{},streamid:n.streamid,mediaElement:e.streamEvents[n.streamid]?e.streamEvents[n.streamid].mediaElement:null}),e.peersBackup[o.userid]&&(o.extra=e.peersBackup[o.userid].extra),e.onstreamended(o),delete e.streamEvents[n.streamid]},n.onNegotiationNeeded=function(n,t,o){o=o||function(){},t=t||n.remoteUserId,n=n||"";var r={remoteUserId:t,message:n,sender:e.userid};n.remoteUserId&&n.message&&n.sender&&(r=n),i(function(){e.socket.emit(e.socketMessageEvent,r,o)})},n.onUserLeft=o,n.disconnectWith=function(n,t){e.socket&&e.socket.emit("disconnect-with",n,t||function(){}),e.deletePeer(n)},e.socketOptions={transport:"polling"},e.openOrJoin=function(n,t){t=t||function(){},e.checkPresence(n,function(n,o){if(n){e.sessionid=o;var i=!1,s=!1,a=!!e.session.oneway,c=w(e.session);s={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},i={OfferToReceiveAudio:a?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo};var u={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:a,isDataOnly:c,localPeerSdpConstraints:i,remotePeerSdpConstraints:s},sender:e.userid};h(u.message,function(){r(u,t)})}else e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=o||e.sessionid,w(e.session)?d(t):e.captureUserMedia(function(){d(t)})})},e.waitingForLocalMedia=!1,e.open=function(n,t){t=t||function(){},e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=n||e.sessionid,i(function(){w(e.session)?d(t):e.captureUserMedia(function(){d(t)})})},e.peersBackup={},e.deletePeer=function(n){if(n&&e.peers[n]){var t={userid:n,extra:e.peers[n]?e.peers[n].extra:{}};if(e.peersBackup[t.userid]&&(t.extra=e.peersBackup[t.userid].extra),e.onleave(t),e.peers[n]){e.peers[n].streams.forEach(function(e){e.stop()});var o=e.peers[n].peer;if(o&&"closed"!==o.iceConnectionState)try{o.close()}catch(i){}e.peers[n]&&(e.peers[n].peer=null,delete e.peers[n])}}},e.rejoin=function(n){if(!e.isInitiator&&n&&Object.keys(n).length){var t={};e.peers[n.remoteUserId]&&(t=e.peers[n.remoteUserId].extra,e.deletePeer(n.remoteUserId)),n&&n.remoteUserId&&(e.join(n.remoteUserId),e.onReConnecting({userid:n.remoteUserId,extra:t}))}},e.join=function(n,t){e.sessionid=!!n&&(n.sessionid||n.remoteUserId||n)||e.sessionid,e.sessionid+="";var o=!1,s=!1,a=!1,d=!1;if(n&&n.session||!n||"string"===typeof n){var c=n&&n.session||e.session;a=!!c.oneway,d=w(c),s={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},o={OfferToReceiveAudio:a?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo}}t=t||{};var u=function(){};"function"===typeof t&&(u=t,t={}),"undefined"!==typeof t.localPeerSdpConstraints&&(o=t.localPeerSdpConstraints),"undefined"!==typeof t.remotePeerSdpConstraints&&(s=t.remotePeerSdpConstraints),"undefined"!==typeof t.isOneWay&&(a=t.isOneWay),"undefined"!==typeof t.isDataOnly&&(d=t.isDataOnly);var f={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:a,isDataOnly:d,localPeerSdpConstraints:o,remotePeerSdpConstraints:s},sender:e.userid};return h(f.message,function(){i(function(){r(f,u)})}),f},e.publicRoomIdentifier="",e.getUserMedia=e.captureUserMedia=function(t,o){t=t||function(){};var i=o||e.session;e.dontCaptureUserMedia||w(i)?t():(i.audio||i.video||i.screen)&&(i.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:b(e)}).then(function(r){if(r.isScreen=!0,n.onGettingLocalMedia(r),!i.audio&&!i.video||b(e))t(r);else{var s={};for(var a in i)"screen"!==a&&(s[a]=i[a]);e.invokeGetUserMedia(o,t,s)}},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:b(e),video:!0,isScreen:!0},function(n){if(!i.audio&&!i.video||b(e))t(n);else{var r={};for(var s in i)"screen"!==s&&(r[s]=i[s]);e.invokeGetUserMedia(o,t,r)}}):(i.audio||i.video)&&e.invokeGetUserMedia(o,t,i))},e.onbeforeunload=function(t,o){e.closeBeforeUnload&&(e.peers.getAllParticipants().forEach(function(t){n.onNegotiationNeeded({userLeft:!0},t),e.peers[t]&&e.peers[t].peer&&e.peers[t].peer.close(),delete e.peers[t]}),o||e.closeSocket(),e.isInitiator=!1)},window.ignoreBeforeUnload?e.closeBeforeUnload=!1:(e.closeBeforeUnload=!0,window.addEventListener("beforeunload",e.onbeforeunload,!1)),e.userid=p(),e.changeUserId=function(n,t){t=t||function(){},e.userid=n||p(),e.socket.emit("changed-uuid",e.userid,t)},e.extra={},e.attachStreams=[],e.session={audio:!0,video:!0},e.enableFileSharing=!1,e.bandwidth={screen:!1,audio:!1,video:!1},e.codecs={audio:"opus",video:"VP9"},e.processSdp=function(n){return T()?n:"Safari"===DetectRTC.browser.name?n:("VP8"===e.codecs.video.toUpperCase()&&(n=U.preferCodec(n,"vp8")),"VP9"===e.codecs.video.toUpperCase()&&(n=U.preferCodec(n,"vp9")),"H264"===e.codecs.video.toUpperCase()&&(n=U.preferCodec(n,"h264")),"G722"===e.codecs.audio&&(n=U.removeNonG722(n)),"Firefox"===DetectRTC.browser.name?n:((e.bandwidth.video||e.bandwidth.screen)&&(n=U.setApplicationSpecificBandwidth(n,e.bandwidth,!!e.session.screen)),e.bandwidth.video&&(n=U.setVideoBitrates(n,{min:8*e.bandwidth.video*1024,max:8*e.bandwidth.video*1024})),e.bandwidth.audio&&(n=U.setOpusAttributes(n,{maxaveragebitrate:8*e.bandwidth.audio*1024,maxplaybackrate:8*e.bandwidth.audio*1024,stereo:1,maxptime:3})),n))},"undefined"!==typeof U&&(e.BandwidthHandler=e.CodecsHandler=U),e.mediaConstraints={audio:{mandatory:{},optional:e.bandwidth.audio?[{bandwidth:8*e.bandwidth.audio*1024||1048576}]:[]},video:{mandatory:{},optional:e.bandwidth.video?[{bandwidth:8*e.bandwidth.video*1024||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(e.mediaConstraints={audio:!0,video:!0}),a.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var n,t;if(DetectRTC.MediaDevices.forEach(function(o){"audioinput"===o.kind&&!1!==e.mediaConstraints.audio&&(n=o),"videoinput"===o.kind&&!1!==e.mediaConstraints.video&&(t=o)}),n){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.audio?e.mediaConstraints.audio.deviceId=n.id:e.mediaConstraints.audio={deviceId:n.id});1==e.mediaConstraints.audio&&(e.mediaConstraints.audio={mandatory:{},optional:[]}),e.mediaConstraints.audio.optional||(e.mediaConstraints.audio.optional=[]);var o=[{sourceId:n.id}];e.mediaConstraints.audio.optional=o.concat(e.mediaConstraints.audio.optional)}if(t){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.video?e.mediaConstraints.video.deviceId=t.id:e.mediaConstraints.video={deviceId:t.id});1==e.mediaConstraints.video&&(e.mediaConstraints.video={mandatory:{},optional:[]}),e.mediaConstraints.video.optional||(e.mediaConstraints.video.optional=[]);o=[{sourceId:t.id}];e.mediaConstraints.video.optional=o.concat(e.mediaConstraints.video.optional)}}),e.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},e.sdpSemantics=null,e.iceCandidatePoolSize=null,e.bundlePolicy=null,e.rtcpMuxPolicy=null,e.iceTransportPolicy=null,e.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},e.iceServers=N.getIceServers(e),e.candidates={host:!0,stun:!0,turn:!0},e.iceProtocols={tcp:!0,udp:!0},e.onopen=function(n){e.enableLogs&&console.info("Data connection has been opened between you & ",n.userid)},e.onclose=function(n){e.enableLogs&&console.warn("Data connection has been closed between you & ",n.userid)},e.onerror=function(n){e.enableLogs&&console.error(n.userid,"data-error",n)},e.onmessage=function(n){e.enableLogs&&console.debug("data-message",n.userid,n.data)},e.send=function(n,t){e.peers.send(n,t)},e.close=e.disconnect=e.leave=function(){e.onbeforeunload(!1,!0)},e.closeEntireSession=function(n){n=n||function(){},e.socket.emit("close-entire-session",function t(){e.getAllParticipants().length?setTimeout(t,100):(e.onEntireSessionClosed({sessionid:e.sessionid,userid:e.userid,extra:e.extra}),e.changeUserId(null,function(){e.close(),n()}))})},e.onEntireSessionClosed=function(n){e.enableLogs&&console.info("Entire session is closed: ",n.sessionid,n.extra)},e.onstream=function(n){var t=e.videosContainer;t.insertBefore(n.mediaElement,t.firstChild);var o=n.mediaElement.play();"undefined"===typeof o?setTimeout(function(){n.mediaElement.play()},2e3):o.catch(function(){}).then(function(){setTimeout(function(){n.mediaElement.play()},2e3)})},e.onstreamended=function(e){e.mediaElement||(e.mediaElement=document.getElementById(e.streamid)),e.mediaElement&&e.mediaElement.parentNode&&e.mediaElement.parentNode.removeChild(e.mediaElement)},e.direction="many-to-many",e.removeStream=function(n,t){var o;e.attachStreams.forEach(function(e){e.id===n&&(o=e)}),o?(e.peers.getAllParticipants().forEach(function(n){if(!t||n===t){var i=e.peers[n];try{i.peer.removeStream(o)}catch(r){}}}),e.renegotiate()):console.warn("No such stream exist.",n)},e.addStream=function(t,o){if(t.getTracks)return-1===e.attachStreams.indexOf(t)&&(t.streamid||(t.streamid=t.id),e.attachStreams.push(t)),void e.renegotiate(o);function i(n){t.streamCallback&&t.streamCallback(n),e.renegotiate(o)}w(t)?e.renegotiate(o):(t.audio||t.video||t.screen)&&(t.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:b(e)}).then(function(o){o.isScreen=!0,n.onGettingLocalMedia(o),!t.audio&&!t.video||b(e)?i(o):e.invokeGetUserMedia(null,function(e){i(e)})},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:b(e),video:!0,isScreen:!0},function(n){!t.audio&&!t.video||b(e)?i(n):e.invokeGetUserMedia(null,function(e){i(e)})}):(t.audio||t.video)&&e.invokeGetUserMedia(null,i))},e.invokeGetUserMedia=function(t,o,i){i||(i=e.session),t||(t=e.mediaConstraints),B({onGettingLocalMedia:function(e){var i=t.video;i&&(i.mediaSource||i.mozMediaSource?e.isScreen=!0:i.mandatory&&i.mandatory.chromeMediaSource&&(e.isScreen=!0)),e.isScreen||(e.isVideo=!!k(e,"video").length,e.isAudio=!e.isVideo&&k(e,"audio").length),n.onGettingLocalMedia(e,function(){"function"===typeof o&&o(e)})},onLocalMediaError:function(e,t){n.onLocalMediaError(e,t)},localMediaConstraints:t||{audio:!!i.audio&&t.audio,video:!!i.video&&t.video}})},e.applyConstraints=function(n,t){if(A&&A.prototype.applyConstraints){var o;if(t)return e.streamEvents[t]&&(o=e.streamEvents[t].stream),void S(o,n);e.attachStreams.forEach(function(e){S(e,n)})}else alert("track.applyConstraints is NOT supported in your browser.")},e.replaceTrack=function(t,o,i){if(t=t||{},x.prototype.getSenders)if(t instanceof A)y(t,o,i);else{if(t instanceof C)return k(t,"video").length&&y(k(t,"video")[0],o,!0),void(k(t,"audio").length&&y(k(t,"audio")[0],o,!1));if(w(t))throw"connection.replaceTrack requires audio and/or video and/or screen.";(t.audio||t.video||t.screen)&&(t.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:b(e)}).then(function(o){o.isScreen=!0,n.onGettingLocalMedia(o),!t.audio&&!t.video||b(e)?r(o):e.invokeGetUserMedia(null,r)},function(e){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.invokeGetUserMedia({audio:b(e),video:!0,isScreen:!0},!t.audio&&!t.video||b(e)?r:e.invokeGetUserMedia(null,r)):(t.audio||t.video)&&e.invokeGetUserMedia(null,r))}else e.addStream(t);function r(n){e.replaceTrack(n,o,i||t.video||t.screen)}},e.resetTrack=function(n,t){n||(n=e.getAllParticipants()),"string"==typeof n&&(n=[n]),n.forEach(function(n){var o=e.peers[n].peer;"undefined"!==typeof t&&!0!==t||!o.lastVideoTrack||e.replaceTrack(o.lastVideoTrack,n,!0),"undefined"!==typeof t&&!1!==t||!o.lastAudioTrack||e.replaceTrack(o.lastAudioTrack,n,!1)})},e.renegotiate=function(t){t?n.renegotiatePeer(t):e.peers.getAllParticipants().forEach(function(e){n.renegotiatePeer(e)})},e.setStreamEndHandler=function(n,t){if(n&&n.addEventListener&&(t=!!t,!n.alreadySetEndHandler)){n.alreadySetEndHandler=!0;var o="ended";"oninactive"in n&&(o="inactive"),n.addEventListener(o,function(){if(n.idInstance&&currentUserMediaRequest.remove(n.idInstance),!t){var o=[];e.attachStreams.forEach(function(e){e.id!=n.id&&o.push(e)}),e.attachStreams=o}var i=e.streamEvents[n.streamid];if(i||(i={stream:n,streamid:n.streamid,type:t?"remote":"local",userid:e.userid,extra:e.extra,mediaElement:e.streamEvents[n.streamid]?e.streamEvents[n.streamid].mediaElement:null}),t&&e.peers[i.userid]){var r=e.peers[i.userid].peer;o=[];r.getRemoteStreams().forEach(function(e){e.id!=n.id&&o.push(e)}),e.peers[i.userid].streams=o}i.userid===e.userid&&"remote"===i.type||(e.peersBackup[i.userid]&&(i.extra=e.peersBackup[i.userid].extra),e.onstreamended(i),delete e.streamEvents[n.streamid])},!1)}},e.onMediaError=function(n,t){e.enableLogs&&console.error(n,t)},e.autoCloseEntireSession=!1,e.filesContainer=e.videosContainer=document.body||document.documentElement,e.isInitiator=!1,e.shareFile=n.shareFile,"undefined"!==typeof G&&G.handle(e),"undefined"!==typeof j&&j.handle(e),e.token=p,e.onNewParticipant=function(n,t){e.acceptParticipationRequest(n,t)},e.acceptParticipationRequest=function(e,t){t.successCallback&&(t.successCallback(),delete t.successCallback),n.createNewPeer(e,t)},"undefined"!==typeof V&&(e.StreamsHandler=V),e.onleave=function(e){},e.invokeSelectFileDialog=function(e){var n=new FileSelector;n.accept="*.*",n.selectSingleFile(e)},e.onmute=function(e){if(e&&e.mediaElement)if("both"===e.muteType||"video"===e.muteType){e.mediaElement.src=null;var n=e.mediaElement.pause();"undefined"!==typeof n?n.then(function(){e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}):e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}else"audio"===e.muteType&&(e.mediaElement.muted=!0)},e.onunmute=function(e){e&&e.mediaElement&&e.stream&&("both"===e.unmuteType||"video"===e.unmuteType?(e.mediaElement.poster=null,e.mediaElement.srcObject=e.stream,e.mediaElement.play()):"audio"===e.unmuteType&&(e.mediaElement.muted=!1))},e.onExtraDataUpdated=function(n){n.status="online",e.onUserStatusChanged(n,!0)},e.getAllParticipants=function(n){return e.peers.getAllParticipants(n)},"undefined"!==typeof V&&(V.onSyncNeeded=function(t,o,i){e.peers.getAllParticipants().forEach(function(e){n.onNegotiationNeeded({streamid:t,action:o,streamSyncNeeded:!0,type:i||"both"},e)})}),e.connectSocket=function(e){i(e)},e.closeSocket=function(){try{io.sockets={}}catch(n){}e.socket&&("function"===typeof e.socket.disconnect&&e.socket.disconnect(),"function"===typeof e.socket.resetProps&&e.socket.resetProps(),e.socket=null)},e.getSocket=function(n){return!n&&e.enableLogs&&console.warn("getSocket.callback paramter is required."),n=n||function(){},e.socket?n(e.socket):i(function(){n(e.socket)}),e.socket},e.getRemoteStreams=n.getRemoteStreams;var R=["selectFirst","selectAll","forEach"];if(e.streamEvents={selectFirst:function(n){return e.streamEvents.selectAll(n)[0]},selectAll:function(n){n||(n={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==n&&(n={local:!0}),"remote"==n&&(n={remote:!0}),"screen"==n&&(n={isScreen:!0}),"audio"==n&&(n={isAudio:!0}),"video"==n&&(n={isVideo:!0});var t=[];return Object.keys(e.streamEvents).forEach(function(o){var i=e.streamEvents[o];if(-1===R.indexOf(o)){var r=!0;n.local&&"local"===i.type&&(r=!1),n.remote&&"remote"===i.type&&(r=!1),n.isScreen&&i.stream.isScreen&&(r=!1),n.isVideo&&i.stream.isVideo&&(r=!1),n.isAudio&&i.stream.isAudio&&(r=!1),n.userid&&i.userid===n.userid&&(r=!1),!1===r&&t.push(i)}}),t}},e.socketURL="/",e.socketMessageEvent="RTCMultiConnection-Message",e.socketCustomEvent="RTCMultiConnection-Custom-Message",e.DetectRTC=DetectRTC,e.setCustomSocketEvent=function(n){n&&(e.socketCustomEvent=n),e.socket&&e.socket.emit("set-custom-socket-event-listener",e.socketCustomEvent)},e.getNumberOfBroadcastViewers=function(n,t){e.socket&&n&&t&&e.socket.emit("get-number-of-users-in-specific-broadcast",n,t)},e.onNumberOfBroadcastViewersUpdated=function(n){e.enableLogs&&e.isInitiator&&console.info("Number of broadcast (",n.broadcastId,") viewers",n.numberOfBroadcastViewers)},e.onUserStatusChanged=function(n,t){e.enableLogs&&!t&&console.info(n.userid,n.status)},e.getUserMediaHandler=B,e.multiPeersHandler=n,e.enableLogs=!0,e.setCustomSocketHandler=function(e){"undefined"!==typeof c&&(c=e)},e.chunkSize=4e4,e.maxParticipantsAllowed=1e3,e.disconnectWith=n.disconnectWith,e.checkPresence=function(n,t){n=n||e.sessionid,"SSEConnection"!==c.name?e.socket?e.socket.emit("check-presence",n+"",function(n,o,i){e.enableLogs&&console.log("checkPresence.isRoomExist: ",n," roomid: ",o),t(n,o,i)}):e.connectSocket(function(){e.checkPresence(n,t)}):SSEConnection.checkPresence(n,function(n,o,i){if(!e.socket)return n||(e.userid=o),void e.connectSocket(function(){t(n,o,i)});t(n,o)})},e.onReadyForOffer=function(n,t){e.multiPeersHandler.createNewPeer(n,t)},e.setUserPreferences=function(n){return e.dontAttachStream&&(n.dontAttachLocalStream=!0),e.dontGetRemoteStream&&(n.dontGetRemoteStream=!0),n},e.updateExtraData=function(){e.socket.emit("extra-data-updated",e.extra)},e.enableScalableBroadcast=!1,e.maxRelayLimitPerUser=3,e.dontCaptureUserMedia=!1,e.dontAttachStream=!1,e.dontGetRemoteStream=!1,e.onReConnecting=function(n){e.enableLogs&&console.info("ReConnecting with",n.userid,"...")},e.beforeAddingStream=function(e){return e},e.beforeRemovingStream=function(e){return e},"undefined"!==typeof isChromeExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isChromeExtensionAvailable),"undefined"!==typeof isFirefoxExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isFirefoxExtensionAvailable),"undefined"!==typeof getChromeExtensionStatus&&(e.getChromeExtensionStatus=getChromeExtensionStatus),e.modifyScreenConstraints=function(e){return e},e.onPeerStateChanged=function(n){e.enableLogs&&-1!==n.iceConnectionState.search(/closed|failed/gi)&&console.error("Peer connection is closed between you & ",n.userid,n.extra,"state:",n.iceConnectionState)},e.isOnline=!0,g("online",function(){e.isOnline=!0}),g("offline",function(){e.isOnline=!1}),e.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(e.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),e.isLowBandwidth)){if(e.bandwidth={audio:!1,video:!1,screen:!1},e.mediaConstraints.audio&&e.mediaConstraints.audio.optional&&e.mediaConstraints.audio.optional.length){var E=[];e.mediaConstraints.audio.optional.forEach(function(e){"undefined"===typeof e.bandwidth&&E.push(e)}),e.mediaConstraints.audio.optional=E}if(e.mediaConstraints.video&&e.mediaConstraints.video.optional&&e.mediaConstraints.video.optional.length){E=[];e.mediaConstraints.video.optional.forEach(function(e){"undefined"===typeof e.bandwidth&&E.push(e)}),e.mediaConstraints.video.optional=E}}e.getExtraData=function(n,t){if(!n)throw"remoteUserId is required.";if("function"!==typeof t)return e.peers[n]?e.peers[n].extra:e.peersBackup[n]?e.peersBackup[n].extra:{};e.socket.emit("get-remote-user-extra-data",n,function(e,n,o){t(e,n,o)})},a.autoOpenOrJoin&&e.openOrJoin(e.sessionid),e.onUserIdAlreadyTaken=function(n,t){e.close(),e.closeSocket(),e.isInitiator=!1,e.userid=e.token(),e.join(e.sessionid),e.enableLogs&&console.warn("Userid already taken.",n,"Your new userid:",e.userid)},e.trickleIce=!0,e.version="3.6.9",e.onSettingLocalDescription=function(n){e.enableLogs&&console.info("Set local description for remote user",n.userid)},e.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},e.autoCreateMediaElement=!0,e.password=null,e.setPassword=function(n,t){t=t||function(){},e.socket?e.socket.emit("set-password",n,t):(e.password=n,t(!0,e.sessionid,null))},e.onSocketDisconnect=function(n){e.enableLogs&&console.warn("socket.io connection is closed")},e.onSocketError=function(n){e.enableLogs&&console.warn("socket.io connection is failed")},e.errors={ROOM_NOT_AVAILABLE:"Room not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"Room permission denied",ROOM_FULL:"Room full",DID_NOT_JOIN_ANY_ROOM:"Did not join any room yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};e.exports=n=s,i=[],r=function(){return s}.apply(n,i),void 0===r||(e.exports=r)}).call(this,t("c8ba"),t("f28c"))},e6d0:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h1",[e._v("This is the title screen")]),t("a",{on:{click:e.startBattleMode}},[e._v("Battle Mode")]),t("br"),t("a",{on:{click:e.startPartyMode}},[e._v("Party Mode")])])},i=[],r=t("01c4"),s=t("5f86"),a={name:"title-screen",mounted:function(){var e=t("cd68"),n=new e;n.socketURL="https://rtcmulticonnection.herokuapp.com:443/",n.session={audio:!0,video:!0},n.openOrJoin("your-room-id")},methods:{startBattleMode:function(){r["d"].SetupBattleModeGame(),s["a"].push("intro-screen")},startPartyMode:function(){r["d"].SetupPartyModeGame(),s["a"].push("intro-screen")}}},d=a,c=t("2877"),u=Object(c["a"])(d,o,i,!1,null,null,null);n["default"]=u.exports},f28c:function(e,n){var t,o,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function d(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(n){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(function(){try{t="function"===typeof setTimeout?setTimeout:r}catch(e){t=r}try{o="function"===typeof clearTimeout?clearTimeout:s}catch(e){o=s}})();var c,u=[],f=!1,l=-1;function m(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!f){var e=a(m);f=!0;var n=u.length;while(n){c=u,u=[];while(++l<n)c&&c[l].run();l=-1,n=u.length}c=null,f=!1,d(e)}}function v(e,n){this.fun=e,this.array=n}function g(){}i.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];u.push(new v(e,n)),1!==u.length||f||a(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}}]);
//# sourceMappingURL=about.308726d7.js.map